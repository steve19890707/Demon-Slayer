(this["webpackJsonpdemon-slayer"]=this["webpackJsonpdemon-slayer"]||[]).push([[0],{78:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n(2),o=n.n(c),i=n(20),r=n.n(i),s=n(0),u=n(5),f=n(22),l=n(25),d=n(34),b=n(16),j=n(3),p=n(14),x=n(17),y={x:0,y:0,checkStatus:!1,boardStatus:!1,debut:!1,roundMove:1},m=Object(x.a)({name:"chess",initialState:[Object(s.a)({name:"Tanjirou",cn:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",id:1,step:3,attack:2,hp:1500,sp:125,dodge:80,fullValue:{hp:1500,sp:125},skill:[{name:"\u65ac\u64ca",atk:200,sp:0,hitfix:0},{name:"\u53c4\u4e4b\u578b\u2015\u6d41\u6d41\u821e",atk:350,sp:15,hitfix:10},{name:"\u634c\u4e4b\u578b\u2015\u6edd\u58fa",atk:500,sp:25,hitfix:5},{name:"\u62fe\u4e4b\u578b\u2015\u751f\u751f\u6d41\u8f49",atk:850,sp:50,hitfix:20}]},y),Object(s.a)({name:"Nezuko",cn:"\u7ac8\u9580 \u79b0\u8c46\u5b50",id:2,step:2,attack:1,hp:2200,sp:200,dodge:80,fullValue:{hp:2200,sp:200},skill:[{name:"\u722a\u64ca",atk:150,sp:0,hitfix:0},{name:"\u8e22\u64ca",atk:250,sp:10,hitfix:15},{name:"\u8840\u9b3c\u8853",atk:1e3,sp:80,hitfix:35}]},y),Object(s.a)({name:"Zenitsu",cn:"\u6211\u59bb\u5584\u9038",id:3,step:3,attack:2,hp:1250,sp:100,dodge:90,fullValue:{hp:1250,sp:100},skill:[{name:"\u65ac\u64ca",atk:200,sp:0,hitfix:0},{name:"\u58f9\u4e4b\u578b\u2015\u9739\u9742\u4e00\u9583",atk:400,sp:15,hitfix:15},{name:"\u58f9\u4e4b\u578b\u2015\u9739\u9742\u4e00\u9583\u2015\u516d\u9023",atk:1e3,sp:70,hitfix:30}]},y),Object(s.a)({name:"Inosuke",cn:"\u5634\u5e73 \u4f0a\u4e4b\u52a9",id:4,step:4,attack:3,hp:1800,sp:80,dodge:40,fullValue:{hp:1800,sp:80},skill:[{name:"\u65ac\u64ca",atk:50,sp:0,hitfix:0},{name:"\u58f9\u4e4b\u7259\u2015\u7a7f\u900f\u523a\u5c04",atk:120,sp:2,hitfix:0},{name:"\u8cb3\u4e4b\u7259\u2015\u5229\u5203\u5c0d\u5288",atk:200,sp:5,hitfix:0},{name:"\u53c4\u4e4b\u7259\u2015\u7360\u7259\u6495\u626f",atk:400,sp:8,hitfix:0}]},y),Object(s.a)({name:"Rengoku",cn:"\u7149\u7344 \u674f\u58fd\u90ce",id:5,step:4,attack:4,hp:2500,sp:200,dodge:85,fullValue:{hp:2500,sp:200},skill:[{name:"\u65ac\u64ca",atk:300,sp:0,hitfix:10},{name:"\u58f9\u4e4b\u578b\u2015\u4e0d\u77e5\u706b",atk:400,sp:15,hitfix:40},{name:"\u8086\u4e4b\u578b\u2015\u76db\u708e\u7684\u873f\u8712",atk:500,sp:15,hitfix:25},{name:"\u4f0d\u4e4b\u578b\u2015\u708e\u864e",atk:800,sp:30,hitfix:40},{name:"\u7396\u4e4b\u578b\u2015\u7149\u7344",atk:1500,sp:100,hitfix:50}]},y)],reducers:{stageDebut:function(t,e){var n=e.payload.isDebutChess;t.map((function(e,a){return n.map((function(n){return e.name===n.get("name")?(t[a].roundMove=1,t[a].debut=!0,t[a].x=n.get("x"),t[a].y=n.get("y")):null}))}))},chessMove:function(t,e){var n=e.payload,a=n.key,c=n.changeX,o=n.changeY;t[a].x=c,t[a].y=o},chessSelected:function(t,e){var n=e.payload.key;t[n].boardStatus=!t[n].boardStatus},chessCheckStatus:function(t,e){var n=e.payload.key;t[n].checkStatus=!t[n].checkStatus},chessDefense:function(t,e){var n=e.payload,a=n.key,c=n.damage;t[a].hp-=c},chessAttackResult:function(t,e){var n=e.payload,a=n.key,c=n.lessSp;t[a].sp-=c},chessDead:function(t,e){var n=e.payload.key;t[n].debut=!1,t[n].hp=t[n].fullValue.hp,t[n].sp=t[n].fullValue.sp},chessMoved:function(t,e){t[e.payload.key].roundMove-=1},chessRoundRest:function(t){for(var e=0;e<t.length;e++)t[e].roundMove=1},chessDone:function(t){for(var e=0;e<t.length;e++)t[e].debut=!1,t[e].hp=t[e].fullValue.hp,t[e].sp=t[e].fullValue.sp,t[e].roundMove=1}}}),O=m.reducer,h=m.actions,k=h.stageDebut,S=h.chessMove,g=h.chessSelected,v=h.chessCheckStatus,T=h.chessAttackResult,w=h.chessDead,E=h.chessMoved,R=h.chessDefense,C=h.chessRoundRest,I=h.chessDone,N={x:0,y:0,checkStatus:!1,boardStatus:!1,debut:!1,roundAttack:!1},z=Object(x.a)({name:"enemyChess",initialState:[Object(s.a)({name:"Teoni",cn:"\u624b\u9b3c",id:1,hp:2e3,sp:100,dodge:25,fullValue:{hp:2e3,sp:100},skill:[{name:"\u80e1\u4e82\u6bc6\u6253",atk:200,sp:0,hitfix:10},{name:"\u4f60\u662f\u7b2c\u5341\u56db\u500b",atk:500,sp:25,hitfix:20}]},N),Object(s.a)({name:"Nomanooni",cn:"\u6cbc\u9b3c",id:2,hp:1500,sp:200,dodge:30,fullValue:{hp:1500,sp:200},skill:[{name:"\u722a\u64ca",atk:150,sp:0,hitfix:15},{name:"\u5206\u8eab\u653b\u64ca",atk:600,sp:15,hitfix:30}]},N),Object(s.a)({name:"Hakuji",cn:"\u7317\u7aa9\u5ea7",id:3,hp:3e3,sp:200,dodge:40,fullValue:{hp:3e3,sp:200},skill:[{name:"\u7834\u58de\u6bba\u653b\u64ca",atk:350,sp:0,hitfix:20},{name:"\u7834\u58de\u6bba\u2015\u4e82\u5f0f",atk:600,sp:15,hitfix:30},{name:"\u8853\u5f0f\u5c55\u958b\u2015\u7834\u58de\u6bba\u2015\u7f85\u91dd",atk:800,sp:30,hitfix:30}]},N)],reducers:{enemyStageDebut:function(t,e){var n=e.payload.isDebutChess;t.map((function(e,a){return n.map((function(n){return e.name===n.get("name")?(t[a].debut=!0,t[a].x=n.get("x"),t[a].y=n.get("y")):null}))}))},enemyChessSelected:function(t,e){var n=e.payload.key;t[n].boardStatus=!t[n].boardStatus},enemyChessCheckStatus:function(t,e){var n=e.payload.key;t[n].checkStatus=!t[n].checkStatus},enemyChessDefense:function(t,e){var n=e.payload,a=n.key,c=n.damage;t[a].hp-=c},enemyChessAttackResult:function(t,e){var n=e.payload,a=n.key,c=n.lessSp;t[a].sp-=c},enemyChessDead:function(t,e){var n=e.payload.key;t[n].debut=!1,t[n].hp=t[n].fullValue.hp,t[n].sp=t[n].fullValue.sp}}}),H=z.reducer,M=z.actions,F=M.enemyStageDebut,P=M.enemyChessSelected,L=M.enemyChessCheckStatus,U=M.enemyChessDefense,B=M.enemyChessAttackResult,G=M.enemyChessDead,A=n(4),Y="localhost"===window.location.hostname?"./Demon-Slayer/":"./",D=new A.h,K={open:new p.Howl({src:["".concat(Y,"audio/bgm-open.mp3")],preload:"metadata",loop:!0,autoplay:!1}),round:new p.Howl({src:["".concat(Y,"audio/bgm-round.mp3")],preload:"metadata",loop:!0}),KimetsuNoYaiba:new p.Howl({src:["".concat(Y,"audio/bgm-KimetsuNoYaiba.mp3")],preload:"metadata",loop:!0}),KimetsuNoYaibaEnemy:new p.Howl({src:["".concat(Y,"audio/bgm-KimetsuNoYaibaEnemy.mp3")],preload:"metadata",loop:!0})},q={Tanjirou:{skill2:A.r.from("".concat(Y,"video/Tanjirou/skill2.mp4")),skill3:A.r.from("".concat(Y,"video/Tanjirou/skill3.mp4")),skill4:A.r.from("".concat(Y,"video/Tanjirou/skill4.mp4"))},Nezuko:{skill2:A.r.from("".concat(Y,"video/Nezuko/skill2.mp4"))},Zenitsu:{skill2:A.r.from("".concat(Y,"video/Zenitsu/skill2.mp4")),skill3:A.r.from("".concat(Y,"video/Zenitsu/skill3.mp4"))},Rengoku:{skill2:A.r.from("".concat(Y,"video/Rengoku/skill2.mp4")),skill3:A.r.from("".concat(Y,"video/Rengoku/skill3.mp4")),skill4:A.r.from("".concat(Y,"video/Rengoku/skill4.mp4")),skill5:A.r.from("".concat(Y,"video/Rengoku/skill5.mp4"))},Hakuji:{skill2:A.r.from("".concat(Y,"video/Hakuji/skill2.mp4")),skill3:A.r.from("".concat(Y,"video/Hakuji/skill3.mp4"))}};!function(){for(var t=Object.keys(q.Tanjirou),e=0;e<t.length;e++)q.Tanjirou["skill".concat(e+2)].baseTexture.resource.autoPlay=!1,q.Tanjirou["skill".concat(e+2)].baseTexture.resource.muted=!0;for(var n=Object.keys(q.Nezuko),a=0;a<n.length;a++)q.Nezuko["skill".concat(a+2)].baseTexture.resource.autoPlay=!1,q.Nezuko["skill".concat(a+2)].baseTexture.resource.muted=!0;for(var c=Object.keys(q.Zenitsu),o=0;o<c.length;o++)q.Zenitsu["skill".concat(o+2)].baseTexture.resource.autoPlay=!1,q.Zenitsu["skill".concat(o+2)].baseTexture.resource.muted=!0;for(var i=Object.keys(q.Rengoku),r=0;r<i.length;r++)q.Rengoku["skill".concat(r+2)].baseTexture.resource.autoPlay=!1,q.Rengoku["skill".concat(r+2)].baseTexture.resource.muted=!0;for(var s=Object.keys(q.Hakuji),u=0;u<s.length;u++)q.Hakuji["skill".concat(u+2)].baseTexture.resource.autoPlay=!1,q.Hakuji["skill".concat(u+2)].baseTexture.resource.muted=!0}(),D.add("Tanjirou-head-default","".concat(Y,"imgs/Tanjirou/head-default.png")).add("Tanjirou-talk-default","".concat(Y,"imgs/Tanjirou/talk-default.jpg")).add("Tanjirou-talk-attack","".concat(Y,"imgs/Tanjirou/talk-attack.jpg")).add("Tanjirou-talk-def","".concat(Y,"imgs/Tanjirou/talk-def.jpg")).add("Tanjirou-talk-dodge","".concat(Y,"imgs/Tanjirou/talk-dodge.jpg")).add("Tanjirou-talk-dead","".concat(Y,"imgs/Tanjirou/talk-dead.jpg")).add("Tanjirou-fight-typeA","".concat(Y,"imgs/Tanjirou/fight-typeA.png")).add("Tanjirou-fight-typeB","".concat(Y,"imgs/Tanjirou/fight-typeB.png")).add("Nezuko-head-default","".concat(Y,"imgs/Nezuko/head-default.png")).add("Nezuko-talk-default","".concat(Y,"imgs/Nezuko/talk-default.jpg")).add("Nezuko-talk-attack","".concat(Y,"imgs/Nezuko/talk-attack.jpg")).add("Nezuko-talk-def","".concat(Y,"imgs/Nezuko/talk-def.jpg")).add("Nezuko-talk-dodge","".concat(Y,"imgs/Nezuko/talk-dodge.jpg")).add("Nezuko-talk-dead","".concat(Y,"imgs/Nezuko/talk-dead.jpg")).add("Nezuko-fight","".concat(Y,"imgs/Nezuko/fight.png")).add("Zenitsu-head-default","".concat(Y,"imgs/Zenitsu/head-default.png")).add("Zenitsu-talk-default","".concat(Y,"imgs/Zenitsu/talk-default.jpg")).add("Zenitsu-talk-attack","".concat(Y,"imgs/Zenitsu/talk-attack.jpg")).add("Zenitsu-talk-def","".concat(Y,"imgs/Zenitsu/talk-def.jpg")).add("Zenitsu-talk-dodge","".concat(Y,"imgs/Zenitsu/talk-dodge.jpg")).add("Zenitsu-talk-dead","".concat(Y,"imgs/Zenitsu/talk-dead.jpg")).add("Zenitsu-talk-usual","".concat(Y,"imgs/Zenitsu/talk-usual.jpg")).add("Zenitsu-talk-fall","".concat(Y,"imgs/Zenitsu/talk-fall.jpg")).add("Zenitsu-talk-afraid","".concat(Y,"imgs/Zenitsu/talk-afraid.jpg")).add("Zenitsu-fight","".concat(Y,"imgs/Zenitsu/fight.png")).add("Inosuke-head-default","".concat(Y,"imgs/Inosuke/head-default.jpg")).add("Inosuke-fight","".concat(Y,"imgs/Inosuke/fight.png")).add("Rengoku-head-default","".concat(Y,"imgs/Rengoku/head-default.png")).add("Rengoku-talk-default","".concat(Y,"imgs/Rengoku/talk-default.jpg")).add("Rengoku-talk-attack","".concat(Y,"imgs/Rengoku/talk-attack.jpg")).add("Rengoku-talk-def","".concat(Y,"imgs/Rengoku/talk-def.jpg")).add("Rengoku-talk-dodge","".concat(Y,"imgs/Rengoku/talk-dodge.jpg")).add("Rengoku-talk-dead","".concat(Y,"imgs/Rengoku/talk-dead.jpg")).add("Rengoku-talk-usual","".concat(Y,"imgs/Rengoku/talk-usual.jpg")).add("Rengoku-talk-spark","".concat(Y,"imgs/Rengoku/talk-spark.jpg")).add("Rengoku-talk-last","".concat(Y,"imgs/Rengoku/talk-last.jpg")).add("Rengoku-fight","".concat(Y,"imgs/Rengoku/fight.png")).add("Teoni-head-default","".concat(Y,"imgs/Teoni/head-default.png")).add("Teoni-talk-default","".concat(Y,"imgs/Teoni/talk-default.jpg")).add("Teoni-talk-attack","".concat(Y,"imgs/Teoni/talk-attack.jpg")).add("Teoni-talk-def","".concat(Y,"imgs/Teoni/talk-def.jpg")).add("Teoni-talk-dodge","".concat(Y,"imgs/Teoni/talk-dodge.jpg")).add("Teoni-talk-dead","".concat(Y,"imgs/Teoni/talk-dead.jpg")).add("Teoni-fight","".concat(Y,"imgs/Teoni/fight.png")).add("Nomanooni-head-default","".concat(Y,"imgs/Nomanooni/head-default.png")).add("Nomanooni-talk-default","".concat(Y,"imgs/Nomanooni/talk-default.jpg")).add("Nomanooni-talk-attack","".concat(Y,"imgs/Nomanooni/talk-attack.jpg")).add("Nomanooni-talk-def","".concat(Y,"imgs/Nomanooni/talk-def.jpg")).add("Nomanooni-talk-dodge","".concat(Y,"imgs/Nomanooni/talk-dodge.jpg")).add("Nomanooni-talk-dead","".concat(Y,"imgs/Nomanooni/talk-dead.jpg")).add("Nomanooni-fight","".concat(Y,"imgs/Nomanooni/fight.png")).add("Hakuji-head-default","".concat(Y,"imgs/Hakuji/head-default.png")).add("Hakuji-talk-default","".concat(Y,"imgs/Hakuji/talk-default.jpg")).add("Hakuji-talk-attack","".concat(Y,"imgs/Hakuji/talk-attack.jpg")).add("Hakuji-talk-def","".concat(Y,"imgs/Hakuji/talk-def.jpg")).add("Hakuji-talk-dodge","".concat(Y,"imgs/Hakuji/talk-dodge.jpg")).add("Hakuji-talk-dead","".concat(Y,"imgs/Hakuji/talk-dead.jpg")).add("Hakuji-talk-usual","".concat(Y,"imgs/Hakuji/talk-usual.jpg")).add("Hakuji-fight","".concat(Y,"imgs/Hakuji/fight.png")).add("stageOne-BG","".concat(Y,"imgs/background/stage1-background.png")).add("stageOne-main-BG","".concat(Y,"imgs/background/stage1-main-background.jpg")).add("stageTwo-BG","".concat(Y,"imgs/background/stage2-background.png")).add("stageTwo-main-BG","".concat(Y,"imgs/background/stage2-main-background.jpg")).add("logo","".concat(Y,"imgs/common/logo.png")).add("atkIcon","".concat(Y,"imgs/common/atk.png")).add("defIcon","".concat(Y,"imgs/common/def.png")).add("otherIcon","".concat(Y,"imgs/common/other.png")).add("closeIcon","".concat(Y,"imgs/common/close.png")).add("muteIcon","".concat(Y,"imgs/common/mute.png")).add("volumeIcon","".concat(Y,"imgs/common/volume.png")).add("startBtn","".concat(Y,"imgs/common/startBtn.png")).add("endBtn","".concat(Y,"imgs/common/end.png")).add("fightOff","".concat(Y,"imgs/common/fightOff.png")).add("fightDef","".concat(Y,"imgs/common/fightDef.png")).add("trun","".concat(Y,"imgs/common/trun.png")).add("next","".concat(Y,"imgs/common/next.png")).load();var V=function(t){var e=t.logoWidth,n=void 0===e?200:e,c=t.startBtn,o=t.setLogoWidth,i=0;return Object(j.useTick)((function(t){if(!c){var e=i+=.28*t;o((function(t){return t+Math.floor(e)}))}})),Object(a.jsx)(j.Sprite,{anchor:.5,x:400,y:250,width:n,height:n,image:D.resources.logo.data})},X=function(t){var e=t.props,n=e.setStageStart,o=e.setCurrentBGM,i=Object(c.useState)(200),r=Object(u.a)(i,2),s=r[0],f=r[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),b=d[0],p=d[1],x=Object(c.useState)(!1),y=Object(u.a)(x,2),m=y[0],O=y[1];return Object(c.useEffect)((function(){s>=350&&O(!0)}),[s]),Object(a.jsx)(j.Container,{sortableChildren:!0,children:b?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(V,{logoWidth:s,startBtn:m,setLogoWidth:f}),m&&Object(a.jsx)(j.Sprite,{interactive:!0,buttonMode:!0,anchor:.5,x:400,y:450,width:120,height:56,image:D.resources.startBtn.data,pointertap:function(){K.open.fade(1,0,1e3),n(!0),o("userRounds")}})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Graphics,{interactive:!0,buttonMode:!0,x:0,y:0,zIndex:1,draw:function(t){t.clear(),t.beginFill(0),t.drawRoundedRect(0,0,800,600,0),t.endFill()},pointertap:function(){K.open.play(),p(!0)},alpha:.5}),Object(a.jsx)(j.Text,{text:"\u4efb\u610f\u9ede\u64ca",zIndex:2,anchor:.5,x:400,y:300,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:24,fill:"#ffffff"})})]})})},Z=20,W=15,J=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=[],n=0;n<W;n++)e.push(t(n,"0x383838"));return e}((function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],a=0;a<Z;a++)n.push({x:a,y:t,color:e,alpha:0,zIndex:1,isInteractive:!1});return n})),_=Object(x.a)({name:"chessMap",initialState:J,reducers:{MoveSelect:function(t,e){for(var n=e.payload,a=n.position,c=n.step,o=n.changeColor,i=n.alphaVal,r=void 0===i?1:i,s=0;s<c+1;s++)a.x+s<=Z-1&&(t[a.y][a.x+s].color=o,t[a.y][a.x+s].isInteractive=!1,t[a.y][a.x+s].alpha=r,t[a.y][a.x+s].zIndex=1),a.y+s<=W-1&&(t[a.y+s][a.x].color=o,t[a.y+s][a.x].isInteractive=!1,t[a.y+s][a.x].alpha=r,t[a.y+s][a.x].zIndex=1),a.x-s>=0&&(t[a.y][a.x-s].color=o,t[a.y][a.x-s].isInteractive=!1,t[a.y][a.x-s].alpha=r,t[a.y][a.x-s].zIndex=1),a.y-s>=0&&(t[a.y-s][a.x].color=o,t[a.y-s][a.x].isInteractive=!1,t[a.y-s][a.x].alpha=r,t[a.y-s][a.x].zIndex=1)},GetMove:function(t,e){for(var n=e.payload,a=n.position,c=n.step,o=n.changeColor,i=n.currentChessPositions,r=0;r<c+1;r++)a.x+r<=Z-1&&(t[a.y][a.x+r].color=o,t[a.y][a.x+r].isInteractive=!0,t[a.y][a.x+r].alpha=.5,t[a.y][a.x+r].zIndex=1),a.y+r<=W-1&&(t[a.y+r][a.x].color=o,t[a.y+r][a.x].isInteractive=!0,t[a.y+r][a.x].alpha=.5,t[a.y+r][a.x].zIndex=1),a.x-r>=0&&(t[a.y][a.x-r].color=o,t[a.y][a.x-r].isInteractive=!0,t[a.y][a.x-r].alpha=.5,t[a.y][a.x-r].zIndex=1),a.y-r>=0&&(t[a.y-r][a.x].color=o,t[a.y-r][a.x].isInteractive=!0,t[a.y-r][a.x].alpha=.5,t[a.y-r][a.x].zIndex=1);i.map((function(e){return t[e.y][e.x].isInteractive=!1}))},GetAttack:function(t,e){for(var n=e.payload,a=n.position,c=n.step,o=n.changeColor,i=n.currentChessPositions,r=0;r<c+1;r++)a.x+r<=Z-1&&(t[a.y][a.x+r].color=o,t[a.y][a.x+r].isInteractive=!0,t[a.y][a.x+r].alpha=.5,t[a.y][a.x+r].zIndex=3),a.y+r<=W-1&&(t[a.y+r][a.x].color=o,t[a.y+r][a.x].isInteractive=!0,t[a.y+r][a.x].alpha=.5,t[a.y+r][a.x].zIndex=3),a.x-r>=0&&(t[a.y][a.x-r].color=o,t[a.y][a.x-r].isInteractive=!0,t[a.y][a.x-r].alpha=.5,t[a.y][a.x-r].zIndex=3),a.y-r>=0&&(t[a.y-r][a.x].color=o,t[a.y-r][a.x].isInteractive=!0,t[a.y-r][a.x].alpha=.5,t[a.y-r][a.x].zIndex=3);i.map((function(e){return t[e.y][e.x].isInteractive=!1,t[e.y][e.x].zIndex=1}))}}}),Q=_.reducer,$=_.actions,tt=$.MoveSelect,et=$.GetMove,nt=$.GetAttack,at=A.r.WHITE,ct=function(t){var e=t.reduxProps,n=e.chess,c=e.enemyChess,i=e.chessMap,r=e.currentChess,u=e.dispatch,f=e.setTipStatus,l=e.setMoveStep,d=e.setBattleInfo;return Object(a.jsx)(o.a.Fragment,{children:i.map((function(t){return t.map((function(t,e){return Object(a.jsx)(j.Sprite,{interactive:t.isInteractive,buttonMode:t.isInteractive,zIndex:t.zIndex,width:40,height:40,x:40*t.x,y:40*t.y,tint:t.color,alpha:t.alpha,texture:at,pointertap:function(){switch(r.type){case"MOVE":f({title:"\u78ba\u5b9a\u79fb\u52d5?",status:!0,position:{x:t.x,y:t.y}}),u(tt({position:{x:n[r.key].x,y:n[r.key].y},step:n[r.key].step,changeColor:"0x06d6a0",alphaVal:.5}));break;case"ATTACK":if(function(t,e){var n=!1;return c.map((function(a){return a.debut&&t===a.x&&e===a.y?n=!0:null})),n}(t.x,t.y)){var e=function(t,e){var n={};return c.map((function(a,c){return a.debut&&t===a.x&&e===a.y?n=Object(s.a)(Object(s.a)({},a),{},{key:c}):null})),n}(t.x,t.y);d({status:!0,attacker:Object(s.a)({key:r.key},n[r.key]),target:Object(s.a)({key:e.key},e)}),u(tt({position:{x:n[r.key].x,y:n[r.key].y},step:n[r.key].attack,changeColor:"0x383838",alphaVal:0}))}else l(!0),u(tt({position:{x:n[r.key].x,y:n[r.key].y},step:n[r.key].acttack,changeColor:"0x383838",alphaVal:0}));break;default:return}}},e)}))}))})},ot=function(t){var e=t.props,n=e.chess,c=e.currentChess,o=e.tipStatus,i=e.currentBGM,r=e.dispatch,u=e.setMoveStep,f=e.setTipStatus,l=e.setOtherTab,d=e.setRoundNum,b=e.setUsualTip,p=e.setFadeBGM;return Object(a.jsxs)(j.Graphics,{x:400,y:300,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(-90,-50,180,100,8),t.endFill()},children:[Object(a.jsx)(j.Text,{text:o.title,anchor:.5,x:0,y:-20,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]})}),Object(a.jsx)(j.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u78ba\u5b9a",x:-30,y:20,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(c.type){case"MOVE":r(S({key:c.key,changeX:o.position.x,changeY:o.position.y})),r(E({key:c.key})),r(tt({position:{x:n[c.key].x,y:n[c.key].y},step:n[c.key].step,changeColor:"0x383838",alphaVal:0})),u(!0),f((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:!1})}));break;case"ENDROUND":l(!1),d((function(t){return t+1})),f((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:!1})})),b({title:"\u6575\u65b9\u56de\u5408",status:!0}),p(i);break;default:return}}}),Object(a.jsx)(j.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u53d6\u6d88",x:30,y:20,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(c.type){case"MOVE":r(tt({position:{x:n[c.key].x,y:n[c.key].y},step:n[c.key].step,changeColor:"0x383838",alphaVal:0})),u(!0),f((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:!1})}));break;case"ENDROUND":f((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:!1})}));break;default:return}}})]})},it=n(13),rt=Object(it.a)({stageOne:{debutChess:[{name:"Tanjirou",x:6,y:7},{name:"Rengoku",x:6,y:5}],debutEnemyChess:[{name:"Teoni",x:14,y:7},{name:"Nomanooni",x:14,y:9}],ruleText:{win:"\u64ca\u6557\u624b\u9b3c\u3002",lose:"\u7ac3\u9580 \u78b3\u6cbb\u90ce \u6230\u6557\u3002"},recap:"\u524d\u60c5\u63d0\u8981\uff1a\u78b3\u6cbb\u90ce\u8207\u9b3c\u6bba\u968a\u58eb\u5011\u3002",story:[{character:"Tanjirou-talk-default",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"1:\u53f0\u8a5e\u6e2c\u8a66"},{character:"Tanjirou-talk-default",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"2:\u53f0\u8a5e\u6e2c\u8a66"},{character:"Tanjirou-talk-default",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"3:\u53f0\u8a5e\u6e2c\u8a66"},{character:"Teoni-talk-default",name:"\u624b\u9b3c",color:"#9d4edd",content:"4:\u53f0\u8a5e\u6e2c\u8a66!!!"},{character:"Tanjirou-talk-def",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"5:\u53f0\u8a5e\u6e2c\u8a66!!!"},{character:"Teoni-talk-default",name:"\u624b\u9b3c",color:"#9d4edd",content:"6:\u53f0\u8a5e\u6e2c\u8a66!!!"},{character:"Tanjirou-talk-attack",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"7:\u53f0\u8a5e\u6e2c\u8a66!!!"}],isWin:function(t){var e=0;return t.map((function(t){return t.debut?e+=t.hp:null})),!(e>0)},isLose:function(t){var e=0;return t.map((function(t){return t.debut?e+=t.hp:null})),!(e>0)}},stageTwo:{debutChess:[{name:"Tanjirou",x:7,y:7},{name:"Nezuko",x:5,y:7},{name:"Zenitsu",x:6,y:6}],debutEnemyChess:[{name:"Teoni",x:14,y:7}],ruleText:{win:"\u64ca\u6557\u624b\u9b3c\u3002",lose:"\u7ac3\u9580 \u78b3\u6cbb\u90ce \u6230\u6557\u3002"},recap:"\u524d\u60c5\u63d0\u8981\uff1a\u78b3\u6cbb\u90ce\u8207\u9b3c\u6bba\u968a\u58eb\u5011\u3002",story:[{character:"Tanjirou-talk-default",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"1:\u53f0\u8a5e\u6e2c\u8a66"},{character:"Tanjirou-talk-default",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"2:\u53f0\u8a5e\u6e2c\u8a66"},{character:"Tanjirou-talk-default",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"3:\u53f0\u8a5e\u6e2c\u8a66"},{character:"Teoni-talk-default",name:"\u624b\u9b3c",color:"#9d4edd",content:"4:\u53f0\u8a5e\u6e2c\u8a66!!!"},{character:"Tanjirou-talk-def",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"5:\u53f0\u8a5e\u6e2c\u8a66!!!"},{character:"Teoni-talk-default",name:"\u624b\u9b3c",color:"#9d4edd",content:"6:\u53f0\u8a5e\u6e2c\u8a66!!!"},{character:"Tanjirou-talk-attack",name:"\u7ac8\u9580 \u70ad\u6cbb\u90ce",color:"#00ff99",content:"7:\u53f0\u8a5e\u6e2c\u8a66!!!"}],isWin:function(t){var e=0;return t.map((function(t){return t.debut?e+=t.hp:null})),!(e>0)},isLose:function(t){var e=0;return t.map((function(t){return t.debut?e+=t.hp:null})),!(e>0)}}}),st=function(t){var e=t.props,n=e.stageStatus,o=e.chess,i=e.currentChess,r=e.enemyChess,s=e.currentBGM,f=e.animeShow,l=e.usualTip,d=e.setMoveStep,b=e.setUsualTip,p=e.setCurrentChess,x=e.setFadeBGM,y=e.setEnemyRoundTab,m=e.setRoundStart,O=e.setStageStatus,h=e.dispatch,k=Object(c.useState)(["#ffffff","#ffffff"]),S=Object(u.a)(k,2),g=S[0],v=S[1];return Object(a.jsxs)(j.Graphics,{x:400,y:300,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(-90,-50,180,100,8),t.endFill()},children:[Object(a.jsx)(j.Text,{text:l.title,anchor:.5,x:0,y:-20,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:g})}),Object(a.jsx)(j.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u78ba\u5b9a",x:0,y:20,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(i.type){case"ATTACK":var t=rt.getIn([n,"isWin"]),e=rt.getIn([n,"isLose"]);t(r)?(v(["#ffffff","#06d6a0"]),p({key:0,type:"CHECKWIN"}),b({title:"\u4f5c\u6230\u7372\u52dd!",status:!0})):e(o)?(v(["#dc2f02","#d00000"]),p({key:0,type:"CHECKLOSE"}),b({title:"\u4f5c\u6230\u5931\u6557!",status:!0})):e(o)||"ENEMY"!==f.type?(d(!0),b({title:"",status:!1})):(b({title:"\u6211\u65b9\u56de\u5408",status:!0}),p({key:0,type:"USERROUND"}));break;case"CHECKWIN":v(["#ffffff","#ffffff"]),b({title:"",status:!1}),m(!1),x(s),O("stageTwo"),h(I());break;case"CHECKLOSE":v(["#ffffff","#ffffff"]),b({title:"GAME OVER",status:!0}),p({key:0,type:"GAMEOVER"});break;case"GAMEOVER":window.location.reload();break;case"ENDROUND":y({oder:0,status:!0}),b({title:"",status:!1});break;case"USERROUND":x(s),d(!0),b({title:"",status:!1})}}})]})},ut=function(t,e){return!(100+t-e<Math.round(100*Math.random()+1))},ft=function(t){var e=t.props,n=e.battleInfo,i=e.setMoveStep,r=e.setBattleInfo,s=e.setAnimeShow,f=e.setCurrentBGM,l=e.dispatch,d=Object(c.useState)({key:0}),b=Object(u.a)(d,2),p=b[0],x=b[1],y=function(t){var e=t.pX,n=void 0===e?0:e,c=t.pY,i=void 0===c?0:c,r=t.data;return Object(a.jsxs)(j.Container,{x:n,y:i,sortableChildren:!0,children:[Object(a.jsx)(j.Text,{text:"\u653b",x:220,y:0,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:30,fill:["#ffffff","#00ff99"]})}),Object(a.jsx)(j.Text,{text:r.cn,x:60,y:-3,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"".concat(r.hp," / ").concat(r.fullValue.hp),x:60,y:17,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ff6b6b"})}),Object(a.jsx)(j.Text,{text:"".concat(r.sp," / ").concat(r.fullValue.sp),x:60,y:34,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#0466c8"})}),Object(a.jsx)(j.Sprite,{width:50,height:50,x:0,y:0,image:D.resources["".concat(r.name,"-head-default")].data}),Object(a.jsx)(j.Text,{text:"\u62db\u5f0f\u9078\u64c7\uff1a",x:0,y:80,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(j.Graphics,{x:0,y:115,zIndex:1,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x0f0f1b"),t.drawRoundedRect(0,0,240,180,8),t.endFill()}}),r.skill.map((function(t,e){var n=r.sp-t.sp>=0;return Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(j.Text,{zIndex:2,interactive:n,buttonMode:!0,text:t.name,x:20,y:130+24*e,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:p.key===e&&n?["#ffffff","#00ff99"]:n?"#ffffff":"#8d99ae",fontWeight:p.key===e?600:300}),pointertap:function(){return x({key:e})}})},e)}))]})},m=function(t){var e=t.pX,n=void 0===e?0:e,c=t.pY,o=void 0===c?0:c,i=t.data;return Object(a.jsxs)(j.Container,{x:n,y:o,sortableChildren:!0,children:[Object(a.jsx)(j.Text,{text:"\u9632",x:0,y:0,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:30,fill:["#ffffff","#ee6c4d"]})}),Object(a.jsx)(j.Text,{text:i.cn,anchor:{x:1,y:0},x:190,y:-3,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"".concat(i.hp," / ").concat(i.fullValue.hp),anchor:{x:1,y:0},x:190,y:17,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ff6b6b"})}),Object(a.jsx)(j.Text,{text:"".concat(i.sp," / ").concat(i.fullValue.sp),anchor:{x:1,y:0},x:190,y:34,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#0466c8"})}),Object(a.jsx)(j.Sprite,{width:50,height:50,x:200,y:0,image:D.resources["".concat(i.name,"-head-default")].data})]})},O=function(t){var e=t.pX,n=t.pY,c=t.data;return Object(a.jsxs)(j.Container,{x:e,y:n,sortableChildren:!0,children:[Object(a.jsx)(j.Graphics,{x:0,y:0,zIndex:1,draw:function(t){t.clear(),t.lineStyle(1,"0x00ff99",1),t.beginFill("0x0f0f1b"),t.drawRoundedRect(0,0,265,215,8),t.endFill()}}),Object(a.jsx)(j.Text,{text:"\u62db\u5f0f\uff1a",zIndex:2,x:20,y:20,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"".concat(c.attacker.skill[p.key].name),zIndex:2,x:80,y:22,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#00ff99"})}),Object(a.jsx)(j.Text,{text:"\u653b\u64ca\u529b\uff1a",zIndex:2,x:20,y:50,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"".concat(c.attacker.skill[p.key].atk),zIndex:2,x:100,y:52,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#fdc500"})}),Object(a.jsx)(j.Text,{text:"\u547d\u4e2d\u7387\uff1a",zIndex:2,x:20,y:80,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"".concat(100+(c.attacker.skill[p.key].hitfix-c.target.dodge>=0?0:c.attacker.skill[p.key].hitfix-c.target.dodge),"%"),zIndex:2,x:100,y:82,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"\u6d88\u8017\uff1a",zIndex:2,x:20,y:110,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"".concat(c.attacker.skill[p.key].sp),zIndex:2,x:80,y:110,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#0466c8"})})]})};return Object(a.jsxs)(j.Graphics,{x:400,y:300,zIndex:99,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(-300,-200,600,400,8),t.endFill()},children:[Object(a.jsx)(y,{pX:-270,pY:-180,data:n.attacker}),Object(a.jsx)(m,{pX:20,pY:-180,data:n.target}),Object(a.jsx)(O,{pX:0,pY:-100,data:n}),Object(a.jsx)(j.Text,{interactive:!0,buttonMode:!0,text:"\u653b\u64ca",anchor:.5,x:180,y:160,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"}),pointertap:function(){f(n.attacker.name);var t=ut(n.attacker.skill[p.key].hitfix,n.target.dodge);l(T({key:n.attacker.key,lessSp:n.attacker.skill[p.key].sp})),l(E({key:n.attacker.key})),t&&l(U({key:n.target.key,damage:n.attacker.skill[p.key].atk})),s({status:!0,type:"USER",isHit:t,attacker:{key:n.attacker.key,skill:n.attacker.skill[p.key],prevSP:n.attacker.sp},target:{key:n.target.key,isHit:t,prevLife:n.target.hp}}),r({status:!1,attacker:{key:""},target:{key:""}})}}),Object(a.jsx)(j.Text,{interactive:!0,buttonMode:!0,text:"\u53d6\u6d88",anchor:.5,x:240,y:160,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"}),pointertap:function(){i(!0),r({status:!1,attacker:{key:""},target:{key:""}})}})]})},lt=n(8),dt=function(t){var e=t.props,n=e.stageStatus,c=e.BGstatus,o=e.BGprop,i=e.SkBGprop,r=e.setSkBGpops,u=e.setBGpops;return Object(a.jsxs)(a.Fragment,{children:["STOP"===c.type&&Object(a.jsx)(j.Sprite,{x:-400,y:-100,zIndex:1,width:1600,height:500,anchor:.5,image:D.resources["".concat(n,"-BG")].data}),"STANDBY"===c.type&&Object(a.jsx)(lt.Spring,{from:{x:-400,y:-100},to:{x:o.toX,y:-100},config:{duration:o.duration},onRest:function(){-400===o.toX?u({toX:400,duration:2e4}):u({toX:-400,duration:-1e3})},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:1,width:1600,height:500,anchor:.5,image:D.resources["".concat(n,"-BG")].data},t))}}),"ENEMYSTANDBY"===c.type&&Object(a.jsx)(lt.Spring,{from:{x:400,y:-100},to:{x:-o.toX,y:-100},config:{duration:o.duration},onRest:function(){400===-o.toX?u({toX:400,duration:2e4}):u({toX:-400,duration:-1e3})},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:1,width:1600,height:500,anchor:.5,image:D.resources["".concat(n,"-BG")].data},t))}}),"SKILL"===c.type&&Object(a.jsx)(lt.Spring,{from:{x:-400,y:-100},to:{x:i.toX,y:-100},config:{duration:i.duration},onRest:function(){-400===i.toX?r({toX:400,duration:500}):r({toX:-400,duration:-1e3})},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:1,width:1600,height:500,anchor:.5,image:D.resources["".concat(n,"-BG")].data},t))}}),"ENEMYSKILL"===c.type&&Object(a.jsx)(lt.Spring,{from:{x:400,y:-100},to:{x:-i.toX,y:-100},config:{duration:i.duration},onRest:function(){400===-i.toX?r({toX:400,duration:500}):r({toX:-400,duration:-1e3})},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:1,width:1600,height:500,anchor:.5,image:D.resources["".concat(n,"-BG")].data},t))}})]})},bt=function(t){var e=t.right,n=void 0===e?{}:e,c=t.left,o=void 0===c?{}:c,i=t.showType,r=void 0===i?"":i,s=t.targetHp,u=void 0===s?0:s,f=t.attackerSp,l=void 0===f?0:f,d=function(t,e){return(Number(e)-Number(t))/(Number(e)/200)},b=function(t,e){return(Number(e)-Number(t))/(Number(e)/100)};return Object(a.jsx)(j.Graphics,{x:-400,y:-300,zIndex:98,draw:function(t){t.clear(),t.beginFill("0x000f23"),t.drawRoundedRect(0,0,800,80,0),t.endFill()},children:Object(a.jsxs)(j.Container,{sortableChildren:!0,children:[Object(a.jsx)(j.Sprite,{width:42,height:42,x:370,y:40,anchor:.5,image:D.resources["".concat("USER"===r?"defIcon":"atkIcon")].data}),Object(a.jsx)(j.Sprite,{width:42,height:42,x:420,y:40,anchor:.5,image:D.resources["".concat("USER"===r?"atkIcon":"defIcon")].data}),Object(a.jsx)(j.Sprite,{width:50,height:50,x:50,y:15,image:D.resources["".concat(o.name,"-head-default")].data}),Object(a.jsx)(j.Text,{text:"".concat("USER"===r?u:o.hp," / ").concat(o.fullValue.hp),anchor:{x:1,y:0},x:320,y:10,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#e71d36"})}),Object(a.jsx)(j.Graphics,{x:320,y:35,zIndex:1,draw:function(t){t.clear(),t.beginFill("0xe71d36"),t.drawRoundedRect(0,0,-200,10,0),t.endFill()}}),Object(a.jsx)(j.Graphics,{x:320,y:35,zIndex:2,draw:function(t){t.clear(),t.beginFill("0x333533"),t.drawRoundedRect(-200,0,d("USER"===r?u:o.hp,o.fullValue.hp),10,0),t.endFill()}}),Object(a.jsx)(j.Text,{text:"".concat("USER"===r?o.sp:l," / ").concat(o.fullValue.sp),anchor:{x:1,y:.3},x:210,y:55,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#4A86E8"})}),Object(a.jsx)(j.Graphics,{x:320,y:55,zIndex:1,draw:function(t){t.clear(),t.beginFill("0x4A86E8"),t.drawRoundedRect(0,0,-100,10,0),t.endFill()}}),Object(a.jsx)(j.Graphics,{x:220,y:55,zIndex:2,draw:function(t){t.clear(),t.beginFill("0x333533"),t.drawRoundedRect(0,0,b("USER"===r?o.sp:l,o.fullValue.sp),10,0),t.endFill()}}),Object(a.jsx)(j.Sprite,{width:50,height:50,x:690,y:15,image:D.resources["".concat(n.name,"-head-default")].data}),Object(a.jsx)(j.Text,{text:"".concat("USER"===r?n.hp:u," / ").concat(n.fullValue.hp),anchor:{x:1,y:0},x:670,y:10,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#e71d36"})}),Object(a.jsx)(j.Graphics,{x:670,y:35,zIndex:1,draw:function(t){t.clear(),t.beginFill("0xe71d36"),t.drawRoundedRect(0,0,-200,10,0),t.endFill()}}),Object(a.jsx)(j.Graphics,{x:670,y:35,zIndex:2,draw:function(t){t.clear(),t.beginFill("0x333533"),t.drawRoundedRect(-200,0,d("USER"===r?n.hp:u,n.fullValue.hp),10,0),t.endFill()}}),Object(a.jsx)(j.Text,{text:"".concat("USER"===r?l:n.sp," / ").concat(n.fullValue.sp),anchor:{x:1,y:.3},x:560,y:55,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#4A86E8"})}),Object(a.jsx)(j.Graphics,{x:670,y:55,zIndex:1,draw:function(t){t.clear(),t.beginFill("0x4A86E8"),t.drawRoundedRect(0,0,-100,10,0),t.endFill()}}),Object(a.jsx)(j.Graphics,{x:570,y:55,zIndex:2,draw:function(t){t.clear(),t.beginFill("0x333533"),t.drawRoundedRect(0,0,b("USER"===r?l:n.sp,n.fullValue.sp),10,0),t.endFill()}})]})})},jt=Object(it.a)({Tanjirou:{default:["(\u5099\u6230\u4e2d)","(\u5099\u6230\u4e2d)"],attack:["\u6211\u8981\u6210\u70ba\u5f37\u8005\uff0c\u7528\u5f37\u8005\u7684\u529b\u91cf\u53bb\u4fdd\u8b77\u5f31\u8005\u3002","\u7121\u8ad6\u9b3c\u596a\u8d70\u591a\u5c11\u751f\u547d\uff0c\u4eba\u985e\u7684\u610f\u5fd7\u662f\u600e\u6a23\u90fd\u4e0d\u6703\u88ab\u6253\u6557\uff01"],dodge:["\u5371\u96aa!!","\u51b7\u975c\u4e0b\u4f86! \u53ef\u4ee5\u6230\u52dd\u7684\u3002"],def:["\u9b3c\u6bba\u968a\u4e0d\u6703\u88ab\u4e00\u9ede\u5c0f\u50b7\u7d66\u6253\u5012!","\u4e0d\u597d\u4e86! \u8abf\u6574\u547c\u5438\u3002"],dead:["\u5c0d\u4e0d\u8d77....\u9c57\u7027\u5e2b\u5085..","\u79b0\u8c46\u5b50..."]},Nezuko:{default:["(\u5099\u6230\u4e2d)","(\u5099\u6230\u4e2d)"],attack:["......!!(\u4eba\u985e\u662f\u5bb6\u4eba)","......!!(\u6253\u5012\u60e1\u9b3c)"],dodge:["......!!(\u5371\u96aa)","......!!(\u6c92\u4e8b\u7684)"],def:["......!!(\u5371\u96aa)","......!!(\u6c92\u4e8b\u7684)"],dead:["......!?",".....(\u54e5\u54e5)"]},Zenitsu:{default:["(\u5099\u6230\u4e2d)","(\u5099\u6230\u4e2d)"],attack:["\u96f7\u4e4b\u547c\u5438...","\u96f7\u4e4b\u547c\u5438!!"],dodge:["!!(\u547c\u5438)","..!!"],def:["!!(\u8abf\u6574\u547c\u5438)","..!!"],dead:["....","....(\u518d\u898b\u4e86,\u723a\u723a)"]},Rengoku:{default:["(\u5099\u6230\u4e2d)","(\u5099\u6230\u4e2d)"],attack:["\u6211\u662f\u708e\u67f1 \u6211\u6703\u76e1\u6211\u7684\u8077\u8cac\u5230\u6700\u5f8c\u4e00\u523b!!","\u5728\u5834\u7684\u4eba\uff0c\u4e00\u500b\u90fd\u4e0d\u6703\u6b7b!!"],dodge:["\u770b\u4f86\u6211\u5011\u7684\u76ee\u6a19\u4e0d\u540c!","\u67f1\uff0c\u53ef\u4e0d\u6703\u8f15\u6613\u88ab\u6253\u6557!"],def:["\u67f1\uff0c\u53ef\u4e0d\u6703\u8f15\u6613\u88ab\u6253\u6557!","\u5c31\u7b97\u53d7\u4e86\u50b7\uff0c\u6211\u4e5f\u6703\u7e7c\u7e8c\u6230\u9b25\u4e0b\u53bb!!"],dead:["\u6bcd\u89aa\u5927\u4eba....\u8eab\u70ba\u60a8\u7684\u5b69\u5b50\u662f\u6211\u7684\u69ae\u5e78\u3002","\u6211\u8981\u4fdd\u8b77\u6240\u6709\u4eba\uff0c\u76f4\u5230\u6700\u5f8c\u4e00\u523b...."]},Teoni:{default:["(\u5099\u6230\u4e2d)","(\u5099\u6230\u4e2d)"],attack:["\u7375\u9b3c\u4eba\u662f\u6700\u4e0a\u7b49\u7684\u98df\u7269!!","\u770b\u6211\u5403\u4e86\u4f60!!"],dodge:["\u6c92\u7528\u6c92\u7528 \u54c8\u54c8\u54c8\u54c8!","\u5c31\u9019\u9ede\u7a0b\u5ea6\u55ce? \u53ef\u60b2\u7684\u528d\u58eb\u3002"],def:["\u4e0d\u4e45\u5c31\u8f2a\u5230\u4f60\u7684\u6b7b\u671f\u4e86!","\u6211\u6703\u5403\u4e86\u4f60!!"],dead:["\u751a\u9ebc!?.....\u6211\u7adf\u7136\u6703\u6b7b\u5728\u7375\u9b3c\u4eba\u624b\u4e0a.....","\u751a\u9ebc!?.....\u6211\u7adf\u7136\u6703\u6b7b\u5728\u7375\u9b3c\u4eba\u624b\u4e0a....."]},Nomanooni:{default:["(\u5099\u6230\u4e2d)","(\u5099\u6230\u4e2d)"],attack:["\u5340\u5340\u7684\u7375\u9b3c\u4eba\uff0c\u5225\u60f3\u963b\u6b62\u6211!!","\u4e0a\u7b49\u7684\u5e74\u8f15\u5973\u5b50\uff0c\u518d\u4e0d\u5403\u5c31\u4f86\u4e0d\u53ca\u4e86!!"],dodge:["\u5630\u5630\u5630\u5630\u5630\u5630!!!!!","\u563b\u563b\u563b\u563b\u563f\u563f\u563f\u563f!!"],def:["\u6211\u8981\u5403\u5149\u4f60\u7684\u9aa8\u982d!!","\u6211\u6703\u6bba\u4e86\u4f60!!"],dead:["\u53ef\u60e1\u53ef\u60e1\u53ef\u60e1\u53ef\u60e1!!!!.....","\u55da\u554a\u554a\u554a\u554a\u554a!?......."]},Hakuji:{default:["(\u5099\u6230\u4e2d)","(\u5099\u6230\u4e2d)"],attack:["\u4e0d\u8b8a\u6210\u9b3c\u5c31\u6bba\u4e86\u4f60\u5427!!","\u5f31\u5c0f\u7684\u6771\u897f\u6c92\u6709\u5b58\u6d3b\u7684\u5fc5\u8981!!"],dodge:["\u9019\u5c31\u662f\u4f60\u7684\u6975\u9650\u4e86\u55ce?","\u5feb\u9ede\u5411\u6211\u9032\u653b\u5440!"],def:["\u54c8\u54c8\uff0c\u9019\u5c31\u5c0d\u4e86!","\u4e0d\u7ba1\u600e\u9ebc\u653b\u64ca\uff0c\u5c0d\u6211\u7684\u4e0d\u6b7b\u4e4b\u8eab\u90fd\u662f\u6c92\u7528\u7684\u3002"],dead:["\u751a\u9ebc!?......\u8eab\u70ba\u4e0a\u5f26\u662f\u4e0d\u53ef\u80fd\u88ab\u64ca\u6557\u7684!!","\u53ef\u60e1\u5440!!!.....\u7adf\u7136\u88ab\u5340\u5340\u7684\u4eba\u985e\u64ca\u6557!!....."]}}),pt=function(t){var e=t.right,n=void 0===e?{}:e,o=t.left,i=void 0===o?{}:o,r=t.linesStatus,s=void 0===r?{}:r,f="USER"===s.character?n.name:i.name,l=jt.getIn([f,s.status]).size-1,d=Object(c.useState)(Math.round(Math.random()*l)),b=Object(u.a)(d,1)[0];return Object(a.jsx)(j.Graphics,{x:-400,y:150,zIndex:98,draw:function(t){t.clear(),t.beginFill("0x000f23"),t.drawRoundedRect(0,0,800,150,0),t.endFill()},children:Object(a.jsxs)(j.Container,{sortableChildren:!0,children:[Object(a.jsx)(j.Sprite,{width:100,height:100,x:50,y:25,image:D.resources["".concat(f,"-talk-").concat(s.status)].data}),Object(a.jsx)(j.Text,{text:jt.getIn([f,s.status,b]),anchor:{x:0,y:0},x:170,y:60,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#ffff"})})]})})},xt=function(t){var e=t.skillName,n=t.attackerName,o=t.isHit,i=t.targetLife,r=t.attackerSp,f=t.resultLife,l=t.resultSp,d=t.BGstatus,b=t.setBGstatus,j=t.setAnimeIsDone,p=t.setTargetHp,x=t.setAttackerSp,y=t.setLinesStatus,m=t.setShowSkill,O=t.defXPostion,h=t.steps,k=t.ShowType,S=Object(c.useState)({x:0,y:0,tint:16777215,alpha:1,mass:1,friction:20,tension:170}),g=Object(u.a)(S,2),v=g[0],T=g[1];return Object(c.useEffect)((function(){if(d.defence&&"\u9632\u79a6"===e){var t=h({skillName:e,isHit:o,BGstatus:d,resultLife:f,setAnimeIsDone:j,setLinesStatus:y,setPosition:T});return function(){return clearTimeout(t)}}}),[d,e,o,f,j,h,y]),Object(c.useEffect)((function(){if("\u9632\u79a6"!==e){var t=h({skillName:e,isHit:o,targetLife:i,attackerSp:r,resultLife:f,resultSp:l,setBGstatus:b,setTargetHp:p,setAttackerSp:x,setLinesStatus:y,setShowSkill:m,setPosition:T});return function(){return clearTimeout(t)}}T((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:O,y:10})}))}),[e,o,i,r,f,l,b,p,x,O,h,y,m]),Object(a.jsx)(k,{skillName:e,attackerName:n,position:v})},yt=n(7),mt=n(6),Ot=n.n(mt),ht=function(t){var e=t.skillName,n=void 0===e?"":e,a=t.isHit,c=void 0!==a&&a,o=t.targetLife,i=void 0===o?0:o,r=t.attackerSp,u=void 0===r?0:r,f=t.resultLife,l=void 0===f?0:f,d=t.resultSp,b=void 0===d?0:d,j=t.BGstatus,p=void 0===j?{}:j,x=t.setBGstatus,y=void 0===x?null:x,m=t.setAnimeIsDone,O=void 0===m?null:m,h=t.setTargetHp,k=void 0===h?null:h,S=t.setAttackerSp,g=void 0===S?null:S,v=t.setLinesStatus,T=void 0===v?null:v,w=t.setPosition,E=void 0===w?null:w,R=t.setShowSkill,C=void 0===R?null:R;switch(n){case"\u9632\u79a6":E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,tension:100})}));var I=function(){return setTimeout((function(){return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,mass:2,friction:5,tension:1e3,tint:13631488})})),l<=0?z({type:"dead"}):M({type:"def"})}),p.seconds)},N=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:0})})),M({type:"dodge"})}),p.seconds)},z=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,friction:2,tint:198430})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),H()}),5e3)},H=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{alpha:0})})),F()}),3e3)},M=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,mass:1,friction:20,tension:170,tint:16777215})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),F()}),5e3)},F=function(){return setTimeout((function(){O(!0)}),3e3)};return c?I():N();case"\u53c4\u4e4b\u578b\u2015\u6d41\u6d41\u821e":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var P=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),L()}),3e3)},L=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill2.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"2",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,tension:1e3})})),U()}})}))},U=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),P();case"\u634c\u4e4b\u578b\u2015\u6edd\u58fa":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var B=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:-100,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),G()}),3e3)},G=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill3.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"3",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,y:50,tension:1e3})})),A()}})}))},A=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),B();case"\u62fe\u4e4b\u578b\u2015\u751f\u751f\u6d41\u8f49":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var Y=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:-100,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),D()}),3e3)},D=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill4.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"4",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,y:50,tension:1e3})})),K()}})}))},K=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),Y();default:y({type:"STANDBY",defence:!1,seconds:1200}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var V=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:50,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),X()}),3e3)},X=function(){var t={number:u};return yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),setTimeout((function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),Z()}),3e3)},Z=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-250,y:50,tension:1e3})})),W()}),1e3)},W=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),V()}},kt=function(t){var e=t.skillName,n=t.attackerName,c=t.position;switch(e){case"\u65ac\u64ca":return Object(a.jsx)(lt.Spring,{from:{x:550,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:200,height:200,anchor:.5,image:D.resources["".concat(n,"-fight-typeA")].data},t))}});case"\u9632\u79a6":return Object(a.jsx)(lt.Spring,{from:{x:650,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:2,width:200,height:200,anchor:.5,alpha:c.alpha,tint:c.tint,image:D.resources["".concat(n,"-fight-typeA")].data},t))}});default:return Object(a.jsx)(lt.Spring,{from:{x:550,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:200,height:200,anchor:.5,image:D.resources["".concat(n,"-fight-typeA")].data},t))}})}},St=function(t){return Object(a.jsx)(xt,Object(s.a)(Object(s.a)({},t),{},{defXPostion:550,steps:ht,ShowType:kt}))},gt=function(t){var e=t.skillName,n=void 0===e?"":e,a=t.isHit,c=void 0!==a&&a,o=t.targetLife,i=void 0===o?0:o,r=t.attackerSp,u=void 0===r?0:r,f=t.resultLife,l=void 0===f?0:f,d=t.resultSp,b=void 0===d?0:d,j=t.BGstatus,p=void 0===j?{}:j,x=t.setBGstatus,y=void 0===x?null:x,m=t.setAnimeIsDone,O=void 0===m?null:m,h=t.setTargetHp,k=void 0===h?null:h,S=t.setAttackerSp,g=void 0===S?null:S,v=t.setLinesStatus,T=void 0===v?null:v,w=t.setPosition,E=void 0===w?null:w,R=t.setShowSkill,C=void 0===R?null:R;switch(n){case"\u9632\u79a6":E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,tension:100})}));var I=function(){return setTimeout((function(){return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,mass:2,friction:5,tension:1e3,tint:13631488})})),l<=0?z({type:"dead"}):M({type:"def"})}),p.seconds)},N=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:0})})),M({type:"dodge"})}),p.seconds)},z=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,friction:2,tint:198430})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),H()}),5e3)},H=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{alpha:0})})),F()}),3e3)},M=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,mass:1,friction:20,tension:170,tint:16777215})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),F()}),5e3)},F=function(){return setTimeout((function(){O(!0)}),3e3)};return c?I():N();case"\u8e22\u64ca":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var P=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),L()}),3e3)},L=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill2.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"2",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,tension:1e3})})),U()}})}))},U=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),P();default:y({type:"STANDBY",defence:!1,seconds:1200}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var B=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:50,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),G()}),3e3)},G=function(){var t={number:u};return yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),setTimeout((function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),A()}),3e3)},A=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-250,y:50,tension:1e3})})),Y()}),1e3)},Y=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),B()}},vt=function(t){var e=t.skillName,n=t.attackerName,c=t.position;switch(e){case"\u9632\u79a6":return Object(a.jsx)(lt.Spring,{from:{x:650,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:2,width:200,height:200,anchor:.5,alpha:c.alpha,tint:c.tint,image:D.resources["".concat(n,"-fight")].data},t))}});default:return Object(a.jsx)(lt.Spring,{from:{x:550,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:200,height:200,anchor:.5,image:D.resources["".concat(n,"-fight")].data},t))}})}},Tt=function(t){return Object(a.jsx)(xt,Object(s.a)(Object(s.a)({},t),{},{defXPostion:550,steps:gt,ShowType:vt}))},wt=function(t){var e=t.skillName,n=void 0===e?"":e,a=t.isHit,c=void 0!==a&&a,o=t.targetLife,i=void 0===o?0:o,r=t.attackerSp,u=void 0===r?0:r,f=t.resultLife,l=void 0===f?0:f,d=t.resultSp,b=void 0===d?0:d,j=t.BGstatus,p=void 0===j?{}:j,x=t.setBGstatus,y=void 0===x?null:x,m=t.setAnimeIsDone,O=void 0===m?null:m,h=t.setTargetHp,k=void 0===h?null:h,S=t.setAttackerSp,g=void 0===S?null:S,v=t.setLinesStatus,T=void 0===v?null:v,w=t.setPosition,E=void 0===w?null:w,R=t.setShowSkill,C=void 0===R?null:R;switch(n){case"\u9632\u79a6":E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,tension:100})}));var I=function(){return setTimeout((function(){return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,mass:2,friction:5,tension:1e3,tint:13631488})})),l<=0?z({type:"dead"}):M({type:"def"})}),p.seconds)},N=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:0})})),M({type:"dodge"})}),p.seconds)},z=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,friction:2,tint:198430})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),H()}),5e3)},H=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{alpha:0})})),F()}),3e3)},M=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,mass:1,friction:20,tension:170,tint:16777215})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),F()}),5e3)},F=function(){return setTimeout((function(){O(!0)}),3e3)};return c?I():N();case"\u58f9\u4e4b\u578b\u2015\u9739\u9742\u4e00\u9583":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var P=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),L()}),3e3)},L=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill2.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"2",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,tension:1e3})})),U()}})}))},U=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),P();case"\u58f9\u4e4b\u578b\u2015\u9739\u9742\u4e00\u9583\u2015\u516d\u9023":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var B=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:-100,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),G()}),3e3)},G=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill3.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"3",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,y:50,tension:1e3})})),A()}})}))},A=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),B();default:y({type:"STANDBY",defence:!1,seconds:1200}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var Y=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:50,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),D()}),3e3)},D=function(){var t={number:u};return yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),setTimeout((function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),K()}),3e3)},K=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-250,y:50,tension:1e3})})),V()}),1e3)},V=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),Y()}},Et=function(t){var e=t.skillName,n=t.attackerName,c=t.position;switch(e){case"\u65ac\u64ca":return Object(a.jsx)(lt.Spring,{from:{x:550,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:200,height:200,anchor:.5,image:D.resources["".concat(n,"-fight")].data},t))}});case"\u9632\u79a6":return Object(a.jsx)(lt.Spring,{from:{x:650,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:2,width:200,height:200,anchor:.5,alpha:c.alpha,tint:c.tint,image:D.resources["".concat(n,"-fight")].data},t))}});default:return Object(a.jsx)(lt.Spring,{from:{x:550,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:200,height:200,anchor:.5,image:D.resources["".concat(n,"-fight")].data},t))}})}},Rt=function(t){return Object(a.jsx)(xt,Object(s.a)(Object(s.a)({},t),{},{defXPostion:550,steps:wt,ShowType:Et}))},Ct=function(t){var e=t.skillName,n=void 0===e?"":e,a=t.isHit,c=void 0!==a&&a,o=t.targetLife,i=void 0===o?0:o,r=t.attackerSp,u=void 0===r?0:r,f=t.resultLife,l=void 0===f?0:f,d=t.resultSp,b=void 0===d?0:d,j=t.BGstatus,p=void 0===j?{}:j,x=t.setBGstatus,y=void 0===x?null:x,m=t.setAnimeIsDone,O=void 0===m?null:m,h=t.setTargetHp,k=void 0===h?null:h,S=t.setAttackerSp,g=void 0===S?null:S,v=t.setLinesStatus,T=void 0===v?null:v,w=t.setPosition,E=void 0===w?null:w,R=t.setShowSkill,C=void 0===R?null:R;switch(n){case"\u9632\u79a6":E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,tension:100})}));var I=function(){return setTimeout((function(){return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,mass:2,friction:5,tension:1e3,tint:13631488})})),l<=0?z({type:"dead"}):M({type:"def"})}),p.seconds)},N=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:0})})),M({type:"dodge"})}),p.seconds)},z=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,friction:2,tint:198430})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),H()}),5e3)},H=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{alpha:0})})),F()}),3e3)},M=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:200,y:50,mass:1,friction:20,tension:170,tint:16777215})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),F()}),5e3)},F=function(){return setTimeout((function(){O(!0)}),3e3)};return c?I():N();case"\u58f9\u4e4b\u578b\u2015\u4e0d\u77e5\u706b":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var P=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),L()}),3e3)},L=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill2.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"2",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,tension:1e3})})),U()}})}))},U=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),P();case"\u8086\u4e4b\u578b\u2015\u76db\u708e\u7684\u873f\u8712":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var B=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:-100,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),G()}),3e3)},G=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill3.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"3",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,y:50,tension:1e3})})),A()}})}))},A=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),B();case"\u4f0d\u4e4b\u578b\u2015\u708e\u864e":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var Y=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:-100,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),D()}),3e3)},D=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill4.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"4",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,y:50,tension:1e3})})),K()}})}))},K=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),Y();case"\u7396\u4e4b\u578b\u2015\u7149\u7344":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var V=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:-100,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),X()}),3e3)},X=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill5.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"5",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-400,y:50,tension:1e3})})),Z()}})}))},Z=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),V();default:y({type:"STANDBY",defence:!1,seconds:1200}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:100})}));var W=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,y:50,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),J()}),3e3)},J=function(){var t={number:u};return yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),setTimeout((function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),_()}),3e3)},_=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-250,y:50,tension:1e3})})),Q()}),1e3)},Q=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:550,y:50,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:250,y:50,tension:100})})),W()}},It=function(t){var e=t.skillName,n=t.attackerName,c=t.position;switch(e){case"\u65ac\u64ca":return Object(a.jsx)(lt.Spring,{from:{x:550,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:300,height:300,anchor:{x:.5,y:.6},image:D.resources["".concat(n,"-fight")].data},t))}});case"\u9632\u79a6":return Object(a.jsx)(lt.Spring,{from:{x:650,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:2,width:300,height:300,anchor:{x:.5,y:.6},alpha:c.alpha,tint:c.tint,image:D.resources["".concat(n,"-fight")].data},t))}});default:return Object(a.jsx)(lt.Spring,{from:{x:550,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:300,height:300,anchor:{x:.5,y:.6},image:D.resources["".concat(n,"-fight")].data},t))}})}},Nt=function(t){return Object(a.jsx)(xt,Object(s.a)(Object(s.a)({},t),{},{defXPostion:550,steps:Ct,ShowType:It}))},zt=function(t){var e=t.attacker,n=void 0===e?{}:e,c=t.skill,o=void 0===c?{}:c,i=t.BGstatus,r=t.isHit,u=void 0!==r&&r,f=t.targetLife,l=void 0===f?0:f,d=t.attackerSp,b=void 0===d?0:d,j=t.resultLife,p=void 0===j?0:j,x=t.resultSp,y=void 0===x?0:x,m=t.setBGstatus,O=t.setAnimeIsDone,h=t.setTargetHp,k=t.setAttackerSp,S=t.setLinesStatus,g=t.setShowSkill,v={skillName:o.name,attackerName:n.name,isHit:u,targetLife:l,attackerSp:b,resultLife:p,resultSp:y,BGstatus:i,setBGstatus:m,setAnimeIsDone:O,setTargetHp:h,setAttackerSp:k,setLinesStatus:S,setShowSkill:g};switch(n.name){case"Tanjirou":return Object(a.jsx)(St,Object(s.a)({},v));case"Nezuko":return Object(a.jsx)(Tt,Object(s.a)({},v));case"Zenitsu":return Object(a.jsx)(Rt,Object(s.a)({},v));case"Rengoku":return Object(a.jsx)(Nt,Object(s.a)({},v));default:return}},Ht=function(t){var e=t.skillName,n=void 0===e?"":e,a=t.isHit,c=void 0!==a&&a,o=t.targetLife,i=void 0===o?0:o,r=t.attackerSp,u=void 0===r?0:r,f=t.resultLife,l=void 0===f?0:f,d=t.resultSp,b=void 0===d?0:d,j=t.BGstatus,p=void 0===j?{}:j,x=t.setBGstatus,y=void 0===x?null:x,m=t.setAnimeIsDone,O=void 0===m?null:m,h=t.setTargetHp,k=void 0===h?null:h,S=t.setAttackerSp,g=void 0===S?null:S,v=t.setLinesStatus,T=void 0===v?null:v,w=t.setPosition,E=void 0===w?null:w;t.setShowSkill;switch(n){case"\u9632\u79a6":E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:150})}));var R=function(){return setTimeout((function(){return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-235,y:20,mass:2,friction:5,tension:1e3,tint:13631488})})),l<=0?I({type:"dead"}):z({type:"def"})}),p.seconds)},C=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-235,y:-10})})),z({type:"dodge"})}),p.seconds)},I=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,y:10,friction:2,tint:198430})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),N()}),5e3)},N=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{alpha:0})})),H()}),3e3)},z=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,y:10,mass:1,friction:20,tension:170,tint:16777215})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),H()}),5e3)},H=function(){return setTimeout((function(){O(!0)}),3e3)};return c?R():C();default:y({type:"ENEMYSTANDBY",defence:!1,seconds:1200}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:100})}));var M=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"ENEMYSKILL"})})),F()}),3e3)},F=function(){var t={number:u};return yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),setTimeout((function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),P()}),3e3)},P=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:175,tension:1e3})})),L()}),1e3)},L=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:100})})),M()}},Mt=function(t){var e=t.skillName,n=t.attackerName,c=t.position;switch(e){case"\u9632\u79a6":return Object(a.jsx)(lt.Spring,{from:{x:-600,y:10},to:{x:c.x,y:c.y},config:{mass:c.mass,tension:c.tension,friction:c.friction},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:2,width:300,height:300,anchor:.5,alpha:c.alpha,tint:c.tint,image:D.resources["".concat(n,"-fight")].data},t))}});default:return Object(a.jsx)(lt.Spring,{from:{x:-600,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:300,height:300,anchor:.5,image:D.resources["".concat(n,"-fight")].data},t))}})}},Ft=function(t){return Object(a.jsx)(xt,Object(s.a)(Object(s.a)({},t),{},{defXPostion:-600,steps:Ht,ShowType:Mt}))},Pt=function(t){var e=t.skillName,n=void 0===e?"":e,a=t.isHit,c=void 0!==a&&a,o=t.targetLife,i=void 0===o?0:o,r=t.attackerSp,u=void 0===r?0:r,f=t.resultLife,l=void 0===f?0:f,d=t.resultSp,b=void 0===d?0:d,j=t.BGstatus,p=void 0===j?{}:j,x=t.setBGstatus,y=void 0===x?null:x,m=t.setAnimeIsDone,O=void 0===m?null:m,h=t.setTargetHp,k=void 0===h?null:h,S=t.setAttackerSp,g=void 0===S?null:S,v=t.setLinesStatus,T=void 0===v?null:v,w=t.setPosition,E=void 0===w?null:w,R=t.setShowSkill,C=void 0===R?null:R;switch(n){case"\u9632\u79a6":E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:150})}));var I=function(){return setTimeout((function(){return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-235,y:20,mass:2,friction:5,tension:1e3,tint:13631488})})),l<=0?z({type:"dead"}):M({type:"def"})}),p.seconds)},N=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-235,y:-10})})),M({type:"dodge"})}),p.seconds)},z=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,y:10,friction:2,tint:198430})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),H()}),5e3)},H=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{alpha:0})})),F()}),3e3)},M=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,y:10,mass:1,friction:20,tension:170,tint:16777215})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),F()}),5e3)},F=function(){return setTimeout((function(){O(!0)}),3e3)};return c?I():N();case"\u7834\u58de\u6bba\u2015\u4e82\u5f0f":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:100})}));var P=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),L()}),3e3)},L=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill2.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"2",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:400,tension:1e3})})),U()}})}))},U=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:100})})),P();case"\u8853\u5f0f\u5c55\u958b\u2015\u7834\u58de\u6bba\u2015\u7f85\u91dd":y({type:"STANDBY",defence:!1,seconds:0}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:100})}));var B=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"SKILL"})})),G()}),3e3)},G=function(){var t={number:u};yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),C((function(t){return q["".concat(t.name)].skill3.baseTexture.resource.source.play(),Object(s.a)(Object(s.a)({},t),{},{status:!0,type:"3",callback:function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:400,tension:1e3})})),A()}})}))},A=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:100})})),B();default:y({type:"ENEMYSTANDBY",defence:!1,seconds:1200}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:100})}));var Y=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"ENEMYSKILL"})})),D()}),3e3)},D=function(){var t={number:u};return yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),setTimeout((function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),K()}),3e3)},K=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:175,tension:1e3})})),V()}),1e3)},V=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:100})})),Y()}},Lt=function(t){var e=t.skillName,n=t.attackerName,c=t.position;switch(e){case"\u9632\u79a6":return Object(a.jsx)(lt.Spring,{from:{x:-600,y:10},to:{x:c.x,y:c.y},config:{mass:c.mass,tension:c.tension,friction:c.friction},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:2,width:250,height:250,anchor:.5,alpha:c.alpha,tint:c.tint,image:D.resources["".concat(n,"-fight")].data},t))}});default:return Object(a.jsx)(lt.Spring,{from:{x:-600,y:50},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:250,height:250,anchor:.5,image:D.resources["".concat(n,"-fight")].data},t))}})}},Ut=function(t){return Object(a.jsx)(xt,Object(s.a)(Object(s.a)({},t),{},{defXPostion:-600,steps:Pt,ShowType:Lt}))},Bt=function(t){var e=t.skillName,n=void 0===e?"":e,a=t.isHit,c=void 0!==a&&a,o=t.targetLife,i=void 0===o?0:o,r=t.attackerSp,u=void 0===r?0:r,f=t.resultLife,l=void 0===f?0:f,d=t.resultSp,b=void 0===d?0:d,j=t.BGstatus,p=void 0===j?{}:j,x=t.setBGstatus,y=void 0===x?null:x,m=t.setAnimeIsDone,O=void 0===m?null:m,h=t.setTargetHp,k=void 0===h?null:h,S=t.setAttackerSp,g=void 0===S?null:S,v=t.setLinesStatus,T=void 0===v?null:v,w=t.setPosition,E=void 0===w?null:w;t.setShowSkill;switch(n){case"\u9632\u79a6":E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:150})}));var R=function(){return setTimeout((function(){return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-235,y:20,mass:2,friction:5,tension:1e3,tint:13631488})})),l<=0?I({type:"dead"}):z({type:"def"})}),p.seconds)},C=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-235,y:-10})})),z({type:"dodge"})}),p.seconds)},I=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,y:10,friction:2,tint:198430})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),N()}),5e3)},N=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{alpha:0})})),H()}),3e3)},z=function(t){var e=t.type;return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,y:10,mass:1,friction:20,tension:170,tint:16777215})})),T((function(t){return{status:e,character:"USER"===t.character?"ENEMY":"USER"}})),H()}),5e3)},H=function(){return setTimeout((function(){O(!0)}),3e3)};return c?R():C();default:y({type:"ENEMYSTANDBY",defence:!1,seconds:1200}),E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,y:40,tension:100})}));var M=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:0,tension:100})})),y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"ENEMYSKILL"})})),F()}),3e3)},F=function(){var t={number:u};return yt.a.to(t,.8,{number:b,onUpdate:function(){g(Ot()(t.number).format("0"))}}),T((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:"attack"})})),setTimeout((function(){y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"STOP",defence:!0})})),P()}),3e3)},P=function(){return setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:175,tension:1e3})})),L()}),1e3)},L=function(){var t={number:i};return c&&yt.a.to(t,.8,{number:l<0?0:l,onUpdate:function(){k(Ot()(t.number).format("0"))}}),setTimeout((function(){E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-600,tension:50})}))}),3e3)};return E((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:-200,tension:100})})),M()}},Gt=function(t){var e=t.skillName,n=t.attackerName,c=t.position;switch(e){case"\u9632\u79a6":return Object(a.jsx)(lt.Spring,{from:{x:-600,y:10},to:{x:c.x,y:c.y},config:{mass:c.mass,tension:c.tension,friction:c.friction},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:2,width:280,height:280,anchor:.5,alpha:c.alpha,tint:c.tint,image:D.resources["".concat(n,"-fight")].data},t))}});default:return Object(a.jsx)(lt.Spring,{from:{x:-600,y:25},to:{x:c.x,y:c.y},config:{mass:1,tension:c.tension,friction:20},children:function(t){return Object(a.jsx)(j.Sprite,Object(s.a)({zIndex:3,width:280,height:280,anchor:.5,image:D.resources["".concat(n,"-fight")].data},t))}})}},At=function(t){return Object(a.jsx)(xt,Object(s.a)(Object(s.a)({},t),{},{defXPostion:-600,steps:Bt,ShowType:Gt}))},Yt=function(t){var e=t.attacker,n=void 0===e?{}:e,c=t.skill,o=void 0===c?{}:c,i=t.BGstatus,r=t.isHit,u=void 0!==r&&r,f=t.targetLife,l=void 0===f?0:f,d=t.attackerSp,b=void 0===d?0:d,j=t.resultLife,p=void 0===j?0:j,x=t.resultSp,y=void 0===x?0:x,m=t.setBGstatus,O=t.setAnimeIsDone,h=t.setTargetHp,k=t.setAttackerSp,S=t.setLinesStatus,g=t.setShowSkill,v={skillName:o.name,attackerName:n.name,isHit:u,targetLife:l,attackerSp:b,resultLife:p,resultSp:y,BGstatus:i,setBGstatus:m,setAnimeIsDone:O,setTargetHp:h,setAttackerSp:k,setLinesStatus:S,setShowSkill:g};switch(n.name){case"Teoni":return Object(a.jsx)(Ft,Object(s.a)({},v));case"Hakuji":return Object(a.jsx)(Ut,Object(s.a)({},v));case"Nomanooni":return Object(a.jsx)(At,Object(s.a)({},v));default:return}},Dt=function(t){var e=t.props,n=e.stageStatus,o=e.animeShow,i=e.chess,r=e.enemyChess,f=e.enemyRoundTab,l=e.setMoveStep,d=e.setAnimeShow,b=e.setUsualTip,p=e.setCurrentChess,x=e.setEnemyRoundTab,y=e.dispatch,m=o.target,O=o.attacker,h=function(){var t=Object(c.useState)({type:"STANDBY",defence:!1,seconds:1200}),e=Object(u.a)(t,2),h=e[0],k=e[1],S=Object(c.useState)({toX:400,duration:2e4}),g=Object(u.a)(S,2),v=g[0],T=g[1],E=Object(c.useState)({toX:400,duration:500}),R=Object(u.a)(E,2),I=R[0],N=R[1],z=Object(c.useState)(m.prevLife),H=Object(u.a)(z,2),M=H[0],F=H[1],P=Object(c.useState)(O.prevSP),L=Object(u.a)(P,2),U=L[0],B=L[1],A=Object(c.useState)(!1),Y=Object(u.a)(A,2),K=Y[0],V=Y[1],X=Object(c.useState)({character:o.type,status:"default"}),Z=Object(u.a)(X,2),W=Z[0],J=Z[1],_=Object(c.useState)({status:!1,type:"0",name:"USER"===o.type?i[O.key].name:r[O.key].name,callback:null}),Q=Object(u.a)(_,2),$=Q[0],tt=Q[1],et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(t){case"CHESS":return"USER"===o.type?i["number"!==typeof o.attacker.key?0:o.attacker.key]:i["number"!==typeof o.target.key?0:o.target.key];case"ENEMYCHESS":return"USER"===o.type?r["number"!==typeof o.target.key?0:o.target.key]:r["number"!==typeof o.attacker.key?0:o.attacker.key]}},nt=function(){var t="USER"===o.type?q["".concat(i[O.key].name)]["skill".concat($.type)]:q["".concat(r[O.key].name)]["skill".concat($.type)],e=t.baseTexture.resource.source;return e.onended=function(){tt((function(t){return e.currentTime=0,Object(s.a)(Object(s.a)({},t),{},{status:!1})})),$.callback()},Object(a.jsx)(j.Sprite,{zIndex:99,width:600,height:370,anchor:.5,x:0,y:-35,image:D.resources["".concat("USER"===o.type?i[O.key].name:r[O.key].name,"-talk-attack")].data,texture:t})};return Object(c.useEffect)((function(){if(K)if(d({status:!1,type:"",isHit:!1,attacker:{key:"",skill:{},prevSP:0},target:{key:"",isHit:!1,prevLife:0}}),"USER"===o.type&&r[m.key].hp<=0)y(G({key:m.key})),b({title:"\u5df2\u64ca\u6557 ".concat(r[m.key].cn,"!"),status:!0});else if("ENEMY"===o.type&&i[m.key].hp<=0)y(w({key:m.key})),b({title:"".concat(i[m.key].cn," \u6230\u6557"),status:!0});else if("ENEMY"===o.type){y(C()),p((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"USERROUND"})}));var t=r.filter((function(t){return t.debut}));f.oder<t.length-1?x((function(t){return{oder:t.oder+=1,status:!0}})):b({title:"\u6211\u65b9\u56de\u5408",status:!0})}else l(!0)}),[K]),Object(a.jsxs)(j.Container,{sortableChildren:!0,children:[Object(a.jsx)(dt,{props:{stageStatus:n,BGstatus:h,BGprop:v,SkBGprop:I,setBGpops:T,setSkBGpops:N}}),Object(a.jsx)(bt,{right:et("CHESS"),left:et("ENEMYCHESS"),showType:o.type,targetHp:M,attackerSp:U}),Object(a.jsx)(zt,{attacker:et("CHESS"),skill:"USER"===o.type?o.attacker.skill:{name:"\u9632\u79a6"},BGstatus:h,isHit:o.isHit,targetLife:m.prevLife,attackerSp:O.prevSP,resultLife:m.prevLife-o.attacker.skill.atk,resultSp:O.prevSP-o.attacker.skill.sp,setBGstatus:k,setAnimeIsDone:V,setTargetHp:F,setAttackerSp:B,setLinesStatus:J,setShowSkill:tt}),Object(a.jsx)(Yt,{attacker:et("ENEMYCHESS"),skill:"USER"===o.type?{name:"\u9632\u79a6"}:o.attacker.skill,BGstatus:h,isHit:o.isHit,targetLife:m.prevLife,attackerSp:O.prevSP,resultLife:m.prevLife-o.attacker.skill.atk,resultSp:O.prevSP-o.attacker.skill.sp,setBGstatus:k,setAnimeIsDone:V,setTargetHp:F,setAttackerSp:B,setLinesStatus:J,setShowSkill:tt}),$.status&&Object(a.jsx)(nt,{}),Object(a.jsx)(pt,{right:et("CHESS"),left:et("ENEMYCHESS"),linesStatus:W}),Object(a.jsx)(j.Sprite,{zIndex:99,interactive:!0,buttonMode:!0,width:75,height:35,x:310,y:240,image:D.resources.fightOff.data,pointertap:function(){if(d({status:!1,type:"",isHit:!1,attacker:{key:"",skill:{},prevSP:0},target:{key:"",isHit:!1,prevLife:0}}),"USER"===o.type&&r[m.key].hp<=0)y(G({key:m.key})),b({title:"\u5df2\u64ca\u6557 ".concat(r[m.key].cn,"!"),status:!0});else if("ENEMY"===o.type&&i[m.key].hp<=0)y(w({key:m.key})),b({title:"".concat(i[m.key].cn," \u6230\u6557"),status:!0});else if("ENEMY"===o.type){y(C()),p((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"USERROUND"})}));var t=r.filter((function(t){return t.debut}));f.oder<t.length-1?x((function(t){return{oder:t.oder+=1,status:!0}})):b({title:"\u6211\u65b9\u56de\u5408",status:!0})}else l(!0);!function(){for(var t=window.setTimeout(null,0);t--;)window.clearTimeout(t)}()}})]})};return Object(a.jsx)(j.Graphics,{x:400,y:300,zIndex:99,draw:function(t){t.clear(),t.beginFill("0x011627"),t.drawRoundedRect(-400,-300,800,600,0),t.endFill()},children:Object(a.jsx)(h,{})})},Kt=function(t){var e=t.props,n=e.stageStatus,c=void 0===n?"":n,o=e.roundNum,i=void 0===o?Number:o,r=e.setMoveStep,u=e.setOtherTab,f=e.setTipStatus,l=e.setCurrentChess;return Object(a.jsxs)(j.Graphics,{x:400,y:300,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(-200,-150,400,300,8),t.endFill()},children:[Object(a.jsx)(j.Sprite,{interactive:!0,buttonMode:!0,width:25,height:25,anchor:.5,x:175,y:-125,image:D.resources.closeIcon.data,pointertap:function(){r(!0),u(!1),f((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:!1})}))}}),Object(a.jsx)(j.Sprite,{interactive:!0,buttonMode:!0,width:75,height:35,x:105,y:90,image:D.resources.endBtn.data,pointertap:function(){l({key:0,type:"ENDROUND"}),f((function(t){return Object(s.a)(Object(s.a)({},t),{},{title:"\u7d50\u675f\u56de\u5408?",status:!0})}))}}),Object(a.jsx)(j.Text,{text:"\u3010 \u7b2c ".concat(function(){switch(c){case"stageOne":return 1;case"stageTwo":return 2;case"stageThree":return 3;default:return 1}}()," \u8a71 \u3011\u4f5c\u6230\u76ee\u7684"),x:-170,y:-125,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:["#ffffff","#00ff99"]})}),Object(a.jsx)(j.Text,{text:rt.getIn([c,"ruleText","win"]),x:-150,y:-90,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:["#ffffff","#ffffff"]})}),Object(a.jsx)(j.Text,{text:"\u6230\u6557\u689d\u4ef6",x:-170,y:-40,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:["#ffffff","#ee6c4d"]})}),Object(a.jsx)(j.Text,{text:rt.getIn([c,"ruleText","lose"]),x:-150,y:-5,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:["#ffffff","#ffffff"]})}),Object(a.jsx)(j.Text,{text:"\u56de\u5408\u6578",x:-170,y:45,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:["#ffffff","#8d99ae"]})}),Object(a.jsx)(j.Text,{text:"\u7b2c ".concat(i," \u56de"),x:-150,y:80,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:["#ffffff","#ffffff"]})})]})},qt=function(t){var e=t.oder,n=void 0===e?0:e,c=t.enemyRandomSkill,o=void 0===c?0:c,i=t.enemyList,r=void 0===i?[]:i,s=r[n].skill;return Object(a.jsxs)(j.Container,{sortableChildren:!0,children:[Object(a.jsx)(j.Sprite,{width:65,height:65,anchor:.5,x:175,y:-75,image:D.resources["".concat(r[n].name,"-head-default")].data}),Object(a.jsx)(j.Text,{text:"".concat(r[n].cn," / \u6280\u80fd"),anchor:{x:.5},x:175,y:-30,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"".concat(s[o].name),anchor:{x:.5},x:175,y:10,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#f15bb5","#e0aaff"]})}),Object(a.jsx)(j.Text,{text:"ATK / ".concat(s[o].atk),anchor:{x:.5},x:175,y:40,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:["#f15bb5","#e0aaff"]})})]})},Vt=function(t){var e=t.chessList,n=t.defChess,c=t.setDefChess;return Object(a.jsxs)(j.Container,{sortableChildren:!0,children:[Object(a.jsx)(j.Graphics,{x:-250,y:-180,zIndex:1,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x0f0f1b"),t.drawRoundedRect(0,0,100,360,8),t.endFill()}}),e.map((function(t,e){var i=85*e;return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(j.Sprite,{interactive:!0,buttonMode:!0,width:65,height:65,anchor:.5,zIndex:2,x:-200,y:-125+i,image:D.resources["".concat(t.name,"-head-default")].data,pointertap:function(){return c(e)}}),e===n&&Object(a.jsx)(j.Graphics,{anchor:.5,x:-200,y:-125+i,zIndex:1,draw:function(t){t.clear(),t.beginFill("0x7b2cbf"),t.drawRoundedRect(-38,-38,76,76,5),t.endFill()}})]},e)}))]})},Xt=function(t){var e=t.defChess,n=t.chessList,c=t.atkEnemy,o=n[e].dodge-c.hitfix>=0?n[e].dodge-c.hitfix:0;return Object(a.jsx)(j.Container,{sortableChildren:!0,children:Object(a.jsxs)(j.Graphics,{x:-125,y:-150,children:[Object(a.jsx)(j.Text,{text:"\u9078\u64c7\u9632\u79a6\uff1a".concat(n[e].cn),anchor:{x:0},style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{text:"HP\uff1a".concat(n[e].hp),anchor:{x:0},y:30,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#ff6b6b"})}),Object(a.jsx)(j.Text,{text:"\u8ff4\u907f\u7387\uff1a".concat(o,"%"),anchor:{x:0},y:60,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:["#ffffff","#4cc9f0"]})})]})})},Zt=function(t){var e=t.props,n=e.enemyRoundTab,o=e.chess,i=e.enemyChess,r=e.setEnemyRoundTab,f=e.setAnimeShow,l=e.setCurrentChess,d=e.setCurrentBGM,b=e.dispatch,p=o.filter((function(t){return t.debut})),x=i.filter((function(t){return t.debut})),y=x[n.oder].skill,m=x[n.oder].sp,O=Object(c.useState)(0),h=Object(u.a)(O,2),k=h[0],S=h[1],g=Object(c.useState)(Math.round(Math.random()*(y.length-1))),v=Object(u.a)(g,1)[0],T=0===m||y[v].sp>m?0:v,w=function(t){var e,n=t.chess,a=t.debut,c=t.key;return n.find((function(t,n){return t.id===a[c].id?e=n:null})),e};return Object(a.jsxs)(j.Graphics,{x:400,y:300,zIndex:99,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(-300,-200,600,400,8),t.endFill()},children:[Object(a.jsx)(Vt,{chessList:p,defChess:k,setDefChess:S}),Object(a.jsx)(Xt,{defChess:k,chessList:p,atkEnemy:x[n.oder].skill[T]}),Object(a.jsx)(qt,{oder:n.oder,enemyRandomSkill:T,enemyList:x}),Object(a.jsx)(j.Sprite,{interactive:!0,buttonMode:!0,width:90,height:42,anchor:.5,zIndex:2,x:230,y:155,image:D.resources.fightDef.data,pointertap:function(){d(x[n.oder].name);var t=ut(x[n.oder].skill[T].hitfix,p[k].dodge);l((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"ATTACK"})})),b(B({key:w({chess:i,debut:x,key:n.oder}),lessSp:x[n.oder].skill[T].sp})),t&&b(R({key:w({chess:o,debut:p,key:k}),damage:x[n.oder].skill[T].atk})),r((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:!1})})),f({status:!0,type:"ENEMY",isHit:t,attacker:{key:w({chess:i,debut:x,key:n.oder}),skill:x[n.oder].skill[T],prevSP:x[n.oder].sp},target:{key:w({chess:o,debut:p,key:k}),isHit:t,prevLife:p[k].hp}})}})]})},Wt=function(t){var e=t.ChessData,n=t.ChessVal,o=t.ChessKey,i=t.EnemyChessData,r=t.positionX,s=t.positionY,f=t.setCurrentChess,l=t.setMoveStep,d=t.dispatch,b=720,p=490,x=[],y=[],m=Object(c.useState)(Object(it.a)([{id:1,title:"\u79fb\u52d5",textColor:["#ffffff","#ffffff"]},{id:2,title:"\u653b\u64ca",textColor:["#ffffff","#ffffff"]},{id:3,title:"\u72c0\u614b",textColor:["#ffffff","#ffffff"]},{id:4,title:"\u8fd4\u56de",textColor:["#ffffff","#ffffff"]}])),O=Object(u.a)(m,2),h=O[0],k=O[1];e.filter((function(t){return t.debut})).map((function(t){return x.push({x:t.x,y:t.y}),y.push({x:t.x,y:t.y})})),i.filter((function(t){return t.debut})).map((function(t){return x.push({x:t.x,y:t.y})}));var S=function(t,n,a){var c=!1;return e.filter((function(t){return t.debut})).map((function(e){if(e.x!==t||e.y!==n)return null;switch(a){case"MOVE":case"ATTACK":var o=e.roundMove>0;return c=o;default:return!0}})),c},T=function(t){t.noop;var e=function(t,e,n){for(var a=!1,c=19,o=14,r=[],s=0;s<n;s++){var u=t+(s+1)>=c?c:t+(s+1),f=e+(s+1)>=o?o:e+(s+1),l=t-(s+1)<=0?0:t-(s+1),d=e-(s+1)<=0?0:e-(s+1);r.push({x:u,y:e},{x:l,y:e},{x:t,y:f},{x:t,y:d})}return i.filter((function(t){return t.debut})).map((function(t){return r.map((function(e){return t.x===e.x&&t.y===e.y?a=!0:null}))})),a}(n.x,n.y,n.attack);return h.map((function(t,c){var i=function(){switch(t.get("id")){case 1:return S(n.x,n.y,"MOVE");case 2:return e&&S(n.x,n.y,"ATTACK");default:return!0}};return Object(a.jsx)(j.Text,{interactive:i(),buttonMode:!0,text:t.get("title"),x:10,y:5+25*c,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:i()?t.get("textColor").toJS():"#8d99ae"}),pointerover:function(){k((function(t){return t.setIn([c,"textColor",1],"#00ff99")}))},pointerout:function(){k((function(t){return t.setIn([c,"textColor",1],"#ffffff")}))},pointertap:function(e){switch(t.get("id")){case 1:f({key:o,type:"MOVE"}),d(et({position:{x:n.x,y:n.y},step:n.step,changeColor:"0x06d6a0",currentChessPositions:x})),d(g({key:o}));break;case 2:f({key:o,type:"ATTACK"}),d(g({key:o})),d(nt({position:{x:n.x,y:n.y},step:n.attack,changeColor:"0x00bbf9",currentChessPositions:y}));break;case 3:f({key:o,type:"STATUS"}),d(v({key:o})),d(g({key:o}));break;case 4:l(!0),d(g({key:o}));break;default:return console.log(e.target)}}},c)}))};return Object(a.jsx)(j.Graphics,{x:800!==r?r:b,y:560!==s&&520!==s?s:p,zIndex:3,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(0,0,60,110,8),t.endFill()},children:Object(a.jsx)(T,{})})},Jt=function(t){var e=t.ChessData,n=t.ChessKey,c=t.CheckStatus,i=t.setMoveStep,r=t.dispatch,s=function(){return e.skill.map((function(t,e){return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(j.Text,{x:-40,y:22*e-70,text:"".concat(t.name),style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffb700"})}),Object(a.jsx)(j.Text,{x:16*t.name.length-35,y:22*e-70,text:"ATK:".concat(t.atk,"(").concat(t.sp,"SP)"),style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:14,fill:"#ffffff"})})]},e)}))};return Object(a.jsxs)(j.Graphics,{x:400,y:300,zIndex:99,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(-250,-150,500,300,8),t.endFill()},children:[Object(a.jsx)(j.Sprite,{interactive:!0,buttonMode:!0,width:25,height:25,anchor:.5,x:220,y:-120,image:D.resources.closeIcon.data,pointertap:function(){i(!0),r(c({key:n}))}}),Object(a.jsx)(j.Sprite,{width:80,height:80,x:-200,y:-90,image:D.resources["".concat(e.name,"-head-default")].data}),Object(a.jsx)(j.Text,{x:-200,y:10,text:e.cn,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{x:-200,y:35,text:"HP:",style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{x:-170,y:35,text:"".concat(e.hp," / ").concat(e.fullValue.hp),style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ff6b6b"})}),Object(a.jsx)(j.Text,{x:-200,y:60,text:"SP:",style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(j.Text,{x:-170,y:60,text:"".concat(e.sp," / ").concat(e.fullValue.sp),style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#0466c8"})}),Object(a.jsx)(j.Text,{x:-50,y:-95,text:"\u62db\u5f0f",style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(s,{})]})},_t=function(t){var e=t.chessProps,n=e.chess,c=e.enemyChess,i=e.moveStep,r=void 0===i?Boolean:i,s=e.setMoveStep,u=e.setCurrentChess,f=e.dispatch;return n.map((function(t,e){var i=0===t.roundMove;return Object(a.jsxs)(o.a.Fragment,{children:[t.debut&&Object(a.jsx)(j.Sprite,{interactive:r,buttonMode:!0,width:40,height:40,x:40*t.x,y:40*t.y,zIndex:2,tint:i?4804695:16777215,pointerover:function(){f(tt({position:{x:t.x,y:t.y},step:t.step,changeColor:"0x06d6a0",alphaVal:.5}))},pointerout:function(){f(tt({position:{x:t.x,y:t.y},step:t.step,changeColor:"0x383838",alphaVal:0}))},pointertap:function(){s(!1),f(g({key:e})),f(tt({position:{x:t.x,y:t.y},step:t.step,changeColor:"0x383838",alphaVal:0}))},image:D.resources["".concat(t.name,"-head-default")].data}),t.boardStatus&&Object(a.jsx)(Wt,{ChessData:n,ChessVal:t,ChessKey:e,EnemyChessData:c,positionX:40*t.x+40,positionY:40*t.y,setCurrentChess:u,setMoveStep:s,dispatch:f}),t.checkStatus&&Object(a.jsx)(Jt,{ChessData:t,ChessKey:e,CheckStatus:v,setMoveStep:s,dispatch:f})]},e)}))},Qt=function(t){var e=t.ChessKey,n=t.positionX,o=t.positionY,i=t.setMoveStep,r=t.dispatch,s=720,f=535,l=Object(c.useState)(Object(it.a)([{id:1,title:"\u72c0\u614b",textColor:["#ffffff","#ffffff"]},{id:2,title:"\u8fd4\u56de",textColor:["#ffffff","#ffffff"]}])),d=Object(u.a)(l,2),b=d[0],p=d[1],x=function(){return b.map((function(t,n){return Object(a.jsx)(j.Text,{interactive:!0,buttonMode:!0,text:t.get("title"),x:10,y:5+25*n,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:t.get("textColor").toJS()}),pointerover:function(){p((function(t){return t.setIn([n,"textColor",1],"#9d4edd")}))},pointerout:function(){p((function(t){return t.setIn([n,"textColor",1],"#ffffff")}))},pointertap:function(n){switch(t.get("id")){case 1:r(L({key:e})),r(P({key:e}));break;case 2:i(!0),r(P({key:e}));break;default:return console.log(n.target)}}},n)}))};return Object(a.jsx)(j.Graphics,{x:800!==n?n:s,y:560!==o&&520!==o?o:f,zIndex:3,draw:function(t){t.clear(),t.lineStyle(1,"0xffffff",1),t.beginFill("0x22223b"),t.drawRoundedRect(0,0,60,62,8),t.endFill()},children:Object(a.jsx)(x,{})})},$t=function(t){var e=t.enemyChessProps,n=e.enemyChess,c=e.moveStep,i=void 0===c?Boolean:c,r=e.setMoveStep,s=e.dispatch;return n.map((function(t,e){return Object(a.jsxs)(o.a.Fragment,{children:[t.debut&&Object(a.jsx)(j.Sprite,{interactive:i,buttonMode:!0,width:40,height:40,x:40*t.x,y:40*t.y,zIndex:2,pointertap:function(){r(!1),s(P({key:e}))},image:D.resources["".concat(t.name,"-head-default")].data}),t.boardStatus&&Object(a.jsx)(Qt,{ChessKey:e,positionX:40*t.x+40,positionY:40*t.y,setMoveStep:r,dispatch:s}),t.checkStatus&&Object(a.jsx)(Jt,{ChessData:t,ChessKey:e,CheckStatus:L,setMoveStep:r,dispatch:s})]},e)}))},te=function(t){var e=t.props,n=e.stageStatus,o=e.setRoundStart,i=e.setMoveStep,r=rt.getIn([n,"story"]),f=rt.getIn([n,"recap"]),l=Object(c.useState)(!0),d=Object(u.a)(l,2),b=d[0],p=d[1],x=Object(c.useState)(0),y=Object(u.a)(x,2),m=y[0],O=y[1];return Object(a.jsx)(j.Graphics,{x:400,y:300,zIndex:99,draw:function(t){t.clear(),t.beginFill("0x011627"),t.drawRoundedRect(-300,-125,600,250,5),t.endFill()},children:Object(a.jsxs)(j.Container,{sortableChildren:!0,children:[Object(a.jsx)(j.Text,{text:"\u3010 \u7b2c ".concat(function(){switch(n){case"stageOne":return 1;case"stageTwo":return 2;case"stageThree":return 3;default:return 1}}()," \u8a71 \u3011"),anchor:.5,x:0,y:-80,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),b?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(lt.Spring,{from:{x:0,y:0,alpha:0},to:{x:0,y:-50,alpha:1},config:{duration:1e3},children:function(t){return Object(a.jsx)(j.Text,Object(s.a)({text:f,anchor:{x:.5},style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:15,fill:"#ffffff",lineHeight:24,breakWords:!0,wordWrap:!0,wordWrapWidth:500})},t))}}),Object(a.jsx)(j.Sprite,{width:32,height:22,anchor:.5,y:85,interactive:!0,buttonMode:!0,image:D.resources.next.data,pointertap:function(){return p(!1)}})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Sprite,{width:85,height:85,x:-250,y:0,anchor:{y:.5},image:D.resources["".concat(r.getIn([m,"character"]))].data}),Object(a.jsx)(j.Text,{text:r.getIn([m,"name"]),anchor:{y:.5},x:-250,y:65,style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:["#ffffff",r.getIn([m,"color"])]})}),Object(a.jsx)(lt.Spring,{from:{x:-140,y:25,alpha:0},to:{x:-140,y:0,alpha:1},config:{duration:250},reset:!0,children:function(t){return Object(a.jsx)(j.Text,Object(s.a)({text:r.getIn([m,"content"]),anchor:{y:.5},style:new A.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff",breakWords:!0,wordWrap:!0,wordWrapWidth:400})},t))}}),Object(a.jsx)(j.Sprite,{width:32,height:22,anchor:.5,x:245,y:85,interactive:!0,buttonMode:!0,image:D.resources.next.data,pointertap:function(){var t=r.size-1;m<t?O((function(t){return t+1})):(o(!0),i(!0))}})]})]})})},ee=function(){var t=Object(c.useState)(!1),e=Object(u.a)(t,2),n=e[0],o=e[1],i=Object(c.useState)(!1),r=Object(u.a)(i,2),s=r[0],f=r[1],l=Object(c.useState)("stageOne"),d=Object(u.a)(l,2),x=d[0],y=d[1],m=Object(c.useState)(1),O=Object(u.a)(m,2),h=O[0],S=O[1],g=Object(c.useState)(!1),v=Object(u.a)(g,2),T=v[0],w=v[1],E=Object(c.useState)(!0),R=Object(u.a)(E,2),C=R[0],I=R[1],N=Object(c.useState)({oder:0,status:!1}),z=Object(u.a)(N,2),H=z[0],M=z[1],P=Object(c.useState)({key:0,type:"MOVE"}),L=Object(u.a)(P,2),U=L[0],B=L[1],G=Object(c.useState)({title:"",status:!1}),A=Object(u.a)(G,2),Y=A[0],q=A[1],V=Object(c.useState)({title:"",status:!1,position:{x:0,y:0}}),Z=Object(u.a)(V,2),W=Z[0],J=Z[1],_=Object(c.useState)({status:!1,attacker:{key:""},target:{key:""}}),Q=Object(u.a)(_,2),$=Q[0],tt=Q[1],et=Object(c.useState)({status:!1,type:"",attacker:{key:"",skill:{},prevSP:0},target:{key:"",isHit:!1,prevLife:0}}),nt=Object(u.a)(et,2),at=nt[0],it=nt[1],ut=Object(c.useState)(!0),lt=Object(u.a)(ut,2),dt=lt[0],bt=lt[1],jt=Object(c.useState)(""),pt=Object(u.a)(jt,2),xt=pt[0],yt=pt[1],mt=Object(c.useState)(""),Ot=Object(u.a)(mt,2),ht=Ot[0],kt=Ot[1],St=Object(b.c)((function(t){return t.chessMap})),gt=Object(b.c)((function(t){return t.chess})),vt=Object(b.c)((function(t){return t.enemyChess})),Tt=Object(b.b)();return Object(c.useEffect)((function(){switch(xt){case"Tanjirou":case"Nezuko":case"Zenitsu":case"Rengoku":if(K.round.fade(.6,0,1e3),K.KimetsuNoYaiba.playing()&&1===K.KimetsuNoYaiba._volume)return;K.KimetsuNoYaiba.stop(),K.KimetsuNoYaiba.volume(1),K.KimetsuNoYaiba.play();break;case"Teoni":case"Hakuji":case"Nomanooni":if(K.round.fade(.6,0,1e3),K.KimetsuNoYaibaEnemy.playing()&&1===K.KimetsuNoYaibaEnemy._volume)return;K.KimetsuNoYaibaEnemy.stop(),K.KimetsuNoYaibaEnemy.volume(1),K.KimetsuNoYaibaEnemy.play();break;case"userRounds":case"enemyRounds":K.round.stop(),K.round.volume(.6),K.round.play()}}),[xt]),Object(c.useEffect)((function(){switch(ht){case"Tanjirou":case"Nezuko":case"Zenitsu":case"Rengoku":K.KimetsuNoYaiba.fade(1,0,1e3),yt("enemyRounds");break;case"Teoni":case"Hakuji":case"Nomanooni":K.KimetsuNoYaibaEnemy.fade(1,0,1e3),yt("userRounds")}}),[ht,x]),Object(c.useEffect)((function(){n&&(Tt(k({isDebutChess:rt.getIn([x,"debutChess"])})),Tt(F({isDebutChess:rt.getIn([x,"debutEnemyChess"])})))}),[Tt,n,x]),Object(a.jsxs)(j.Stage,{width:800,height:600,options:{autoDensity:!0,antialias:!0,backgroundColor:75306},children:[Object(a.jsxs)(j.Container,{sortableChildren:!0,children:[n&&Object(a.jsx)(j.Sprite,{width:30,height:30,anchor:.5,x:760,y:40,zIndex:99,interactive:dt,buttonMode:!0,image:D.resources.otherIcon.data,pointertap:function(){w(!0),bt(!1)}}),Object(a.jsx)(j.Sprite,{width:30,height:30,anchor:.5,x:40,y:40,zIndex:99,interactive:!at.status,buttonMode:!0,image:D.resources[C?"volumeIcon":"muteIcon"].data,pointertap:function(){I((function(t){return!t})),C?p.Howler.volume(0):p.Howler.volume(1)}}),Object(a.jsx)(j.Sprite,{width:800,height:600,zIndex:1,image:D.resources["".concat(x,"-main-BG")].data}),Object(a.jsx)(ct,{reduxProps:{chess:gt,enemyChess:vt,chessMap:St,currentChess:U,dispatch:Tt,setTipStatus:J,setMoveStep:bt,setBattleInfo:tt}}),Object(a.jsx)(_t,{chessProps:{chess:gt,enemyChess:vt,moveStep:dt,setMoveStep:bt,setCurrentChess:B,dispatch:Tt}}),Object(a.jsx)($t,{enemyChessProps:{enemyChess:vt,moveStep:dt,setMoveStep:bt,dispatch:Tt}})]}),T&&Object(a.jsx)(Kt,{props:{stageStatus:x,roundNum:h,setMoveStep:bt,setOtherTab:w,setTipStatus:J,setCurrentChess:B}}),W.status&&Object(a.jsx)(ot,{props:{chess:gt,currentChess:U,tipStatus:W,currentBGM:xt,dispatch:Tt,setMoveStep:bt,setTipStatus:J,setOtherTab:w,setRoundNum:S,setUsualTip:q,setFadeBGM:kt}}),Y.status&&Object(a.jsx)(st,{props:{stageStatus:x,chess:gt,currentChess:U,enemyChess:vt,usualTip:Y,currentBGM:xt,animeShow:at,setMoveStep:bt,setUsualTip:q,setCurrentChess:B,setFadeBGM:kt,setEnemyRoundTab:M,setRoundStart:o,setStageStatus:y,dispatch:Tt}}),$.status&&Object(a.jsx)(ft,{props:{battleInfo:$,setMoveStep:bt,setBattleInfo:tt,setAnimeShow:it,setCurrentBGM:yt,dispatch:Tt}}),at.status&&Object(a.jsx)(Dt,{props:{stageStatus:x,animeShow:at,chess:gt,enemyChess:vt,enemyRoundTab:H,setMoveStep:bt,setAnimeShow:it,setUsualTip:q,setCurrentChess:B,setEnemyRoundTab:M,dispatch:Tt}}),H.status&&Object(a.jsx)(Zt,{props:{enemyRoundTab:H,chess:gt,enemyChess:vt,setEnemyRoundTab:M,setAnimeShow:it,setCurrentChess:B,setCurrentBGM:yt,dispatch:Tt}}),s&&!n&&Object(a.jsx)(te,{props:{stageStatus:x,setRoundStart:o,setMoveStep:bt}}),!s&&Object(a.jsx)(X,{props:{setStageStart:f,setCurrentBGM:yt}})]})};function ne(){var t=Object(f.a)(["\n  position: relative;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  width:100%;\n  height:100vh;\n  .loading {\n    color: #fff;\n    font-size:24px;\n  }\n  canvas {\n    width:",";\n    height:",";\n  }\n  .mobile-cover {\n    @keyframes trun {\n      0% { transform: translate(-50%,-50%)rotate(0deg) }\n      75% { transform: translate(0%,-50%)rotate(90deg) }\n      100% { transform: translate(0%,-50%)rotate(90deg) }\n    }\n    position: fixed;\n    width:100%;\n    height:100vh;\n    z-index:99;\n    background-color:#000;\n    img { \n      position: absolute;\n      transform:translate(-50%,-50%);\n      top:40%;\n      left:50%;\n      width:15%;\n      max-width:75px;\n      animation:trun 2s infinite;\n    }\n    .subtitle {\n      position: absolute;\n      transform:translate(-50%,-50%);\n      top:50%;\n      left:50%;\n      color:#f90;\n      font-size:18px;\n    }\n  }\n"]);return ne=function(){return t},t}function ae(){var t=Object(f.a)(["\n  body { background:#1d2430; }\n"]);return ae=function(){return t},t}var ce=d.a.desktop(),oe=Object(l.a)(ae()),ie=l.b.div(ne(),(function(t){return!t.isDesktop&&"\n      75% !important\n    "}),(function(t){return!t.isDesktop&&"\n      100% !important\n    "})),re=function(){var t=Object(c.useState)(!1),e=Object(u.a)(t,2),n=e[0],o=e[1],i=Object(c.useState)(!1),r=Object(u.a)(i,2),f=r[0],l=r[1],d=Object(c.useState)(window.innerHeight>window.innerWidth),b=Object(u.a)(d,2),j=b[0],p=b[1],x=Object(c.useState)(0),y=Object(u.a)(x,2),m=y[0],O=y[1],h=Object(c.useState)({open:!1,KimetsuNoYaiba:!1}),k=Object(u.a)(h,2),S=k[0],g=k[1];return K.KimetsuNoYaiba.on("load",(function(){g((function(t){return Object(s.a)(Object(s.a)({},t),{},{KimetsuNoYaiba:!0})}))})),K.open.on("load",(function(){g((function(t){return Object(s.a)(Object(s.a)({},t),{},{open:!0})}))})),Object(c.useEffect)((function(){D.onProgress.add((function(t){O(Math.floor(t.progress))})),D.onComplete.add((function(t,e){O(100),o(!0)}))})),Object(c.useEffect)((function(){var t=function(){var t=window.innerWidth,e=window.innerHeight;p(e>t)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),Object(c.useEffect)((function(){S.KimetsuNoYaiba&&S.open&&n&&l(!0)}),[n,S]),Object(a.jsxs)(ie,{isDesktop:ce,children:[Object(a.jsx)(oe,{}),f?Object(a.jsx)(ee,{}):Object(a.jsx)("span",{className:"loading",children:n?"\u8b80\u53d6\u97f3\u8a0a\u4e2d...":"Loading ".concat(m,"%..")}),j&&!ce&&Object(a.jsxs)("div",{className:"mobile-cover",children:[Object(a.jsx)("img",{alt:"",src:D.resources.trun.url}),Object(a.jsx)("div",{className:"subtitle",children:"\u8acb\u6a6b\u653e\u88dd\u7f6e"})]})]})},se=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),o(t),i(t)}))},ue=n(9),fe=Object(ue.c)({chess:O,chessMap:Q,enemyChess:H}),le=Object(ue.e)(fe);r.a.render(Object(a.jsx)(b.a,{store:le,children:Object(a.jsx)(re,{})}),document.getElementById("root")),se()}},[[78,1,2]]]);
//# sourceMappingURL=main.cda93c25.chunk.js.map