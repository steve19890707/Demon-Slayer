(this["webpackJsonpdemon-slayer"]=this["webpackJsonpdemon-slayer"]||[]).push([[0],{55:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(0),o=n.n(s),i=n(14),c=n.n(i),f=n(6),r=n(16),u=n(20),l=n(9),d=n(3),x=n(1),y=new x.h,h="localhost"===window.location.hostname?"./Demon-Slayer/":"./";y.add("Tanjirou-head-default","".concat(h,"imgs/Tanjirou/head-default.jpg")).add("Tanjirou-fight","".concat(h,"imgs/Tanjirou/fight.png")).add("Nezuko-head-default","".concat(h,"imgs/Nezuko/head-default.jpg")).add("Nezuko-fight","".concat(h,"imgs/Nezuko/fight.png")).add("Inosuke-head-default","".concat(h,"imgs/Inosuke/head-default.jpg")).add("Inosuke-fight","".concat(h,"imgs/Inosuke/fight.png")).add("Teoni-head-default","".concat(h,"imgs/Teoni/head-default.jpg")).add("Teoni-fight","".concat(h,"imgs/Teoni/fight.png")).add("Nomanooni-head-default","".concat(h,"imgs/Nomanooni/head-default.jpg")).add("Nomanooni-fight","".concat(h,"imgs/Nomanooni/fight.png")).load();var p=n(11),b=20,j=15,S=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=[],n=0;n<j;n++)t.push(e(n,"0x383838"));return t}((function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],a=0;a<b;a++)n.push({x:a,y:e,color:t,isInteractive:!1});return n})),g=Object(p.a)({name:"chessMap",initialState:S,reducers:{MoveSelect:function(e,t){for(var n=t.payload,a=n.position,s=n.step,o=n.changeColor,i=0;i<s+1;i++)a.x+i<=b-1&&(e[a.y][a.x+i].color=o,e[a.y][a.x+i].isInteractive=!1),a.y+i<=j-1&&(e[a.y+i][a.x].color=o,e[a.y+i][a.x].isInteractive=!1),a.x-i>=0&&(e[a.y][a.x-i].color=o,e[a.y][a.x-i].isInteractive=!1),a.y-i>=0&&(e[a.y-i][a.x].color=o,e[a.y-i][a.x].isInteractive=!1)},GetMove:function(e,t){for(var n=t.payload,a=n.position,s=n.step,o=n.changeColor,i=n.currentChessPositions,c=0;c<s+1;c++)a.x+c<=b-1&&(e[a.y][a.x+c].color=o,e[a.y][a.x+c].isInteractive=!0),a.y+c<=j-1&&(e[a.y+c][a.x].color=o,e[a.y+c][a.x].isInteractive=!0),a.x-c>=0&&(e[a.y][a.x-c].color=o,e[a.y][a.x-c].isInteractive=!0),a.y-c>=0&&(e[a.y-c][a.x].color=o,e[a.y-c][a.x].isInteractive=!0);i.map((function(t){return e[t.y][t.x].isInteractive=!1}))}}}),m=g.reducer,O=g.actions,v=O.MoveSelect,C=O.GetMove,k=n(5),w={x:0,y:0,checkStatus:!1,boardStatus:!1,debut:!1,roundAttack:!1},T=Object(p.a)({name:"chess",initialState:[Object(k.a)({name:"Tanjirou",cn:"\u7ac3\u9580 \u78b3\u6cbb\u90ce",step:3,hp:1e3,sp:100,fullValue:{hp:1e3,sp:100},skill:[{name:"\u65ac\u64ca",atk:20,sp:0},{name:"\u53c4\u4e4b\u578b\u2015\u6d41\u6d41\u821e",atk:120,sp:5},{name:"\u634c\u4e4b\u578b\u2015\u6edd\u58fa",atk:120,sp:5},{name:"\u62fe\u4e4b\u578b\u2015\u751f\u751f\u6d41\u8f49",atk:250,sp:10}]},w),Object(k.a)({name:"Nezuko",step:2},w),Object(k.a)({name:"Inosuke",step:4},w)],reducers:{stageDebut:function(e,t){var n=t.payload.isDebutChess;e.map((function(t,a){return n.map((function(n){return t.name===n.get("name")?(e[a].debut=!0,e[a].x=n.get("x"),e[a].y=n.get("y")):null}))}))},chessMove:function(e,t){var n=t.payload,a=n.key,s=n.changeX,o=n.changeY;e[a].x=s,e[a].y=o},chessSelected:function(e,t){var n=t.payload.key;e[n].boardStatus=!e[n].boardStatus},chessCheckStatus:function(e,t){var n=t.payload.key;e[n].checkStatus=!e[n].checkStatus}}}),I=T.reducer,M=T.actions,F=M.stageDebut,z=M.chessMove,P=M.chessSelected,D=M.chessCheckStatus,H={x:0,y:0,boardStatus:!1,debut:!1},q=Object(p.a)({name:"enemyChess",initialState:[Object(k.a)({name:"Teoni"},H),Object(k.a)({name:"Nomanooni"},H)],reducers:{enemyStageDebut:function(e,t){var n=t.payload.isDebutChess;e.map((function(t,a){return n.map((function(n){return t.name===n.get("name")?(e[a].debut=!0,e[a].x=n.get("x"),e[a].y=n.get("y")):null}))}))},enemyChessSelected:function(e,t){var n=t.payload.key;e[n].boardStatus=!e[n].boardStatus}}}),E=q.reducer,N=q.actions,R=N.enemyStageDebut,V=N.enemyChessSelected,G=n(19),K=x.r.WHITE,X=function(e){var t=e.reduxProps,n=t.chess,s=t.chessMap,o=t.currentChess,i=t.dispatch,c=t.setTipStatus;return Object(a.jsx)(G.Container,{children:s.map((function(e,t){return e.map((function(e,t){return Object(a.jsx)(G.Sprite,{interactive:e.isInteractive,buttonMode:e.isInteractive,width:40,height:40,x:40*e.x,y:40*e.y,tint:e.color,texture:K,pointertap:function(){switch(o.type){case"MOVE":c({title:"\u78ba\u5b9a\u79fb\u52d5?",status:!0,position:{x:e.x,y:e.y}}),i(v({position:{x:n[o.key].x,y:n[o.key].y},step:n[o.key].step,changeColor:"0x4361ee"}));break;default:return}}},t)}))}))})},Y=n(10),J=function(e){var t=e.ChessData,n=e.ChessVal,o=e.ChessKey,i=e.EnemyChessData,c=e.positionX,r=e.positionY,u=e.setCurrentChess,l=e.setMoveStep,y=e.dispatch,h=720,p=490,b=[],j=Object(s.useState)(Object(Y.a)([{id:1,title:"\u79fb\u52d5",textColor:["#ffffff","#ffffff"]},{id:2,title:"\u653b\u64ca",textColor:["#ffffff","#ffffff"]},{id:3,title:"\u72c0\u614b",textColor:["#ffffff","#ffffff"]},{id:4,title:"\u8fd4\u56de",textColor:["#ffffff","#ffffff"]}])),S=Object(f.a)(j,2),g=S[0],m=S[1];t.map((function(e){return b.push({x:e.x,y:e.y})})),i.map((function(e){return b.push({x:e.x,y:e.y})}));var O=function(e){e.noop;return g.map((function(e,t){return Object(a.jsx)(d.Text,{interactive:!0,buttonMode:!0,text:e.get("title"),x:10,y:5+25*t,style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:e.get("textColor").toJS()}),pointerover:function(){m((function(e){return e.setIn([t,"textColor",1],"#00ff99")}))},pointerout:function(){m((function(e){return e.setIn([t,"textColor",1],"#ffffff")}))},pointertap:function(t){switch(e.get("id")){case 1:u({key:o,type:"MOVE"}),y(C({position:{x:n.x,y:n.y},step:n.step,changeColor:"0x4361ee",currentChessPositions:b})),y(P({key:o}));break;case 3:u({key:o,type:"STATUS"}),y(D({key:o})),y(P({key:o}));break;case 4:l(!0),y(P({key:o}));break;default:return console.log(t.target)}}},t)}))};return Object(a.jsx)(d.Graphics,{x:800!==c?c:h,y:560!==r?r:p,zIndex:2,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(0,0,60,110,8),e.endFill()},children:Object(a.jsx)(O,{})})},A=function(e){var t=e.ChessKey,n=e.positionX,o=e.positionY,i=e.setMoveStep,c=e.dispatch,r=720,u=535,l=Object(s.useState)(Object(Y.a)([{id:1,title:"\u72c0\u614b",textColor:["#ffffff","#ffffff"]},{id:2,title:"\u8fd4\u56de",textColor:["#ffffff","#ffffff"]}])),y=Object(f.a)(l,2),h=y[0],p=y[1],b=function(e){e.noop;return h.map((function(e,n){return Object(a.jsx)(d.Text,{interactive:!0,buttonMode:!0,text:e.get("title"),x:10,y:5+25*n,style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:e.get("textColor").toJS()}),pointerover:function(){p((function(e){return e.setIn([n,"textColor",1],"#9d4edd")}))},pointerout:function(){p((function(e){return e.setIn([n,"textColor",1],"#ffffff")}))},pointertap:function(n){switch(e.get("id")){case 2:i(!0),c(V({key:t}));break;default:return console.log(n.target)}}},n)}))};return Object(a.jsx)(d.Graphics,{x:800!==n?n:r,y:560!==o?o:u,zIndex:2,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(0,0,60,62,8),e.endFill()},children:Object(a.jsx)(b,{})})},L=function(e){var t=e.props,n=t.chess,s=t.currentChess,o=t.tipStatus,i=t.dispatch,c=t.setMoveStep,f=t.setTipStatus;return Object(a.jsxs)(d.Graphics,{x:400,y:300,zIndex:99,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(-90,-50,180,100,8),e.endFill()},children:[Object(a.jsx)(d.Text,{text:o.title,anchor:.5,x:0,y:-20,style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]})}),Object(a.jsx)(d.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u78ba\u5b9a",x:-30,y:20,style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(s.type){case"MOVE":i(z({key:s.key,changeX:o.position.x,changeY:o.position.y})),i(v({position:{x:n[s.key].x,y:n[s.key].y},step:n[s.key].step,changeColor:"0x383838"})),c(!0),f((function(e){return Object(k.a)(Object(k.a)({},e),{},{status:!1})}));break;default:return}}}),Object(a.jsx)(d.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u53d6\u6d88",x:30,y:20,style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(s.type){case"MOVE":i(v({position:{x:n[s.key].x,y:n[s.key].y},step:n[s.key].step,changeColor:"0x383838"})),c(!0),f((function(e){return Object(k.a)(Object(k.a)({},e),{},{status:!1})}));break;default:return}}})]})},B=function(e){var t=e.ChessData,n=e.ChessKey,s=e.setMoveStep,i=e.dispatch,c=function(){return t.skill.map((function(e,t){return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(d.Text,{x:-40,y:22*t-70,text:"".concat(e.name),style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffb700"})}),Object(a.jsx)(d.Text,{x:16*e.name.length-35,y:22*t-70,text:"ATK:".concat(e.atk,"(").concat(e.sp,"SP)"),style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:14,fill:"#ffffff"})})]},t)}))};return Object(a.jsxs)(d.Graphics,{x:400,y:300,zIndex:99,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(-250,-150,500,300,8),e.endFill()},children:[Object(a.jsx)(d.Graphics,{x:220,y:-120,interactive:!0,buttonMode:!0,pointertap:function(e){s(!0),i(D({key:n}))},draw:function(e){e.beginFill("0x02040f"),e.drawRoundedRect(-15,-15,30,30,50),e.endFill()},children:Object(a.jsx)(d.Text,{anchor:.5,text:"X",style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})})}),Object(a.jsx)(d.Sprite,{width:80,height:80,x:-200,y:-90,image:y.resources["".concat(t.name,"-head-default")].data}),Object(a.jsx)(d.Text,{x:-200,y:10,text:t.cn,style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(d.Text,{x:-200,y:35,text:"HP:",style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(d.Text,{x:-170,y:35,text:"".concat(t.hp," / ").concat(t.fullValue.hp),style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ff6b6b"})}),Object(a.jsx)(d.Text,{x:-200,y:60,text:"SP:",style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(d.Text,{x:-170,y:60,text:"".concat(t.sp," / ").concat(t.fullValue.sp),style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#0466c8"})}),Object(a.jsx)(d.Text,{x:-50,y:-95,text:"\u62db\u5f0f",style:new x.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(c,{})]})},U=Object(Y.a)({stageOne:{debutChess:[{name:"Tanjirou",x:3,y:7}],debutEnemyChess:[{name:"Teoni",x:16,y:7}]},stageTwo:{debutChess:[{name:"Tanjirou",x:3,y:9},{name:"Nezuko",x:3,y:11}],debutEnemyChess:[{name:"Nomanooni",x:16,y:7}]}}),W=function(){var e=Object(s.useState)("stageOne"),t=Object(f.a)(e,2),n=t[0],i=(t[1],Object(s.useState)({key:0,type:"MOVE"})),c=Object(f.a)(i,2),r=c[0],u=c[1],x=Object(s.useState)({title:"",status:!1,position:{x:0,y:0}}),h=Object(f.a)(x,2),p=h[0],b=h[1],j=Object(s.useState)(!0),S=Object(f.a)(j,2),g=S[0],m=S[1],O=Object(l.c)((function(e){return e.chessMap})),C=Object(l.c)((function(e){return e.chess})),k=Object(l.c)((function(e){return e.enemyChess})),w=Object(l.b)();return Object(s.useEffect)((function(){w(F({isDebutChess:U.getIn([n,"debutChess"])})),w(R({isDebutChess:U.getIn([n,"debutEnemyChess"])}))}),[w,n]),Object(a.jsxs)(d.Stage,{width:800,height:600,options:{autoDensity:!0,antialias:!0,backgroundColor:75306},children:[Object(a.jsx)(X,{reduxProps:{chess:C,chessMap:O,currentChess:r,dispatch:w,setTipStatus:b}}),Object(a.jsxs)(d.Container,{sortableChildren:!0,children:[C.map((function(e,t){return Object(a.jsxs)(o.a.Fragment,{children:[e.debut&&Object(a.jsx)(d.Sprite,{interactive:g,buttonMode:!0,width:40,height:40,x:40*e.x,y:40*e.y,zIndex:1,pointerover:function(){w(v({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x09bc8a"}))},pointerout:function(){w(v({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x383838"}))},pointertap:function(){m(!1),w(P({key:t})),w(v({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x383838"}))},image:y.resources["".concat(e.name,"-head-default")].data}),e.boardStatus&&Object(a.jsx)(J,{ChessData:C,ChessVal:e,ChessKey:t,EnemyChessData:k,positionX:40*e.x+40,positionY:40*e.y,setCurrentChess:u,setMoveStep:m,dispatch:w}),e.checkStatus&&Object(a.jsx)(B,{ChessData:e,ChessKey:t,setMoveStep:m,dispatch:w})]},t)})),k.map((function(e,t){return Object(a.jsxs)(o.a.Fragment,{children:[e.debut&&Object(a.jsx)(d.Sprite,{interactive:g,buttonMode:!0,width:40,height:40,x:40*e.x,y:40*e.y,zIndex:1,pointertap:function(){m(!1),w(V({key:t}))},image:y.resources["".concat(e.name,"-head-default")].data}),e.boardStatus&&Object(a.jsx)(A,{ChessKey:t,positionX:40*e.x+40,positionY:40*e.y,setMoveStep:m,dispatch:w})]},t)}))]}),p.status&&Object(a.jsx)(L,{props:{chess:C,currentChess:r,tipStatus:p,dispatch:w,setMoveStep:m,setTipStatus:b}})]})};function Q(){var e=Object(r.a)(["\n  position: relative;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  width:100%;\n  height:100vh;\n  .loading {\n    color: #fff;\n    font-size:24px;\n  }\n"]);return Q=function(){return e},e}function Z(){var e=Object(r.a)(["\n  body { background:#1d2430; }\n"]);return Z=function(){return e},e}var $=Object(u.a)(Z()),_=u.b.div(Q()),ee=function(){var e=Object(s.useState)(!1),t=Object(f.a)(e,2),n=t[0],o=t[1];return Object(s.useEffect)((function(){y.onComplete.add((function(){o(!0)}))})),Object(a.jsxs)(_,{children:[Object(a.jsx)($,{}),n?Object(a.jsx)(W,{}):Object(a.jsx)("span",{className:"loading",children:"Loading.."})]})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),o(e),i(e)}))},ne=n(4),ae=Object(ne.c)({chess:I,chessMap:m,enemyChess:E}),se=Object(ne.e)(ae);c.a.render(Object(a.jsx)(l.a,{store:se,children:Object(a.jsx)(ee,{})}),document.getElementById("root")),te()}},[[55,1,2]]]);
//# sourceMappingURL=main.a809d354.chunk.js.map