(this["webpackJsonpdemon-slayer"]=this["webpackJsonpdemon-slayer"]||[]).push([[0],{55:function(e,t,n){"use strict";n.r(t);var o=n(2),s=n(0),i=n.n(s),a=n(12),c=n.n(a),r=n(6),f=n(15),u=n(19),l=n(4),p=n(1),d=n(17),x=n(14),h=20,y=15,j=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=[],n=0;n<y;n++)t.push(e(n,"0x383838"));return t}((function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],o=0;o<h;o++)n.push({x:o,y:e,color:t,isInteractive:!1});return n})),b=Object(x.a)({name:"chessMap",initialState:j,reducers:{MoveSelect:function(e,t){for(var n=t.payload,o=n.position,s=n.step,i=n.changeColor,a=0;a<s+1;a++)o.x+a<=h-1&&(e[o.y][o.x+a].color=i,e[o.y][o.x+a].isInteractive=!1),o.y+a<=y-1&&(e[o.y+a][o.x].color=i,e[o.y+a][o.x].isInteractive=!1),o.x-a>=0&&(e[o.y][o.x-a].color=i,e[o.y][o.x-a].isInteractive=!1),o.y-a>=0&&(e[o.y-a][o.x].color=i,e[o.y-a][o.x].isInteractive=!1)},GetMove:function(e,t){for(var n=t.payload,o=n.position,s=n.step,i=n.changeColor,a=n.currentChessPositions,c=0;c<s+1;c++)o.x+c<=h-1&&(e[o.y][o.x+c].color=i,e[o.y][o.x+c].isInteractive=!0),o.y+c<=y-1&&(e[o.y+c][o.x].color=i,e[o.y+c][o.x].isInteractive=!0),o.x-c>=0&&(e[o.y][o.x-c].color=i,e[o.y][o.x-c].isInteractive=!0),o.y-c>=0&&(e[o.y-c][o.x].color=i,e[o.y-c][o.x].isInteractive=!0);a.map((function(t){return e[t.y][t.x].isInteractive=!1}))}}}),g=b.reducer,v=b.actions,O=v.MoveSelect,S=v.GetMove,C=p.r.WHITE,k=function(e){var t=e.reduxProps,n=t.chess,s=t.chessMap,i=t.currentChess,a=t.dispatch,c=t.setTipStatus;return Object(o.jsx)(d.Container,{children:s.map((function(e,t){return e.map((function(e,t){return Object(o.jsx)(d.Sprite,{interactive:e.isInteractive,buttonMode:e.isInteractive,width:40,height:40,x:40*e.x,y:40*e.y,tint:e.color,texture:C,pointertap:function(){switch(i.type){case"MOVE":c({title:"\u78ba\u5b9a\u79fb\u52d5?",status:!0,position:{x:e.x,y:e.y}}),a(O({position:{x:n[i.key].x,y:n[i.key].y},step:n[i.key].step,changeColor:"0x4361ee"}));break;default:return}}},t)}))}))})},m=n(9),I=Object(x.a)({name:"chess",initialState:[{name:"Tanjirou",x:3,y:10,step:3,boardStatus:!1},{name:"Nezuko",x:3,y:12,step:2,boardStatus:!1},{name:"Inosuke",x:4,y:11,step:4,boardStatus:!1}],reducers:{chessMove:function(e,t){var n=t.payload,o=n.key,s=n.changeX,i=n.changeY;e[o].x=s,e[o].y=i},chessSelected:function(e,t){var n=t.payload.key;e[n].boardStatus=!e[n].boardStatus}}}),M=I.reducer,w=I.actions,T=w.chessMove,z=w.chessSelected,F=new p.h,P="localhost"===window.location.hostname?"./Demon-Slayer/":"./";F.add("Tanjirou-head-default","".concat(P,"imgs/Tanjirou/head-default.jpg")).add("Tanjirou-fight","".concat(P,"imgs/Tanjirou/fight.png")).add("Nezuko-head-default","".concat(P,"imgs/Nezuko/head-default.jpg")).add("Nezuko-fight","".concat(P,"imgs/Nezuko/fight.png")).add("Inosuke-head-default","".concat(P,"imgs/Inosuke/head-default.jpg")).add("Inosuke-fight","".concat(P,"imgs/Inosuke/fight.png")).load();var E=n(28),V=function(e){var t=e.ChessData,n=e.ChessVal,i=e.ChessKey,a=e.positionX,c=e.positionY,f=e.setCurrentChess,u=e.setMoveStep,d=e.dispatch,x=[],h=Object(s.useState)(Object(E.a)([{id:1,title:"\u79fb\u52d5",textColor:["#ffffff","#ffffff"]},{id:2,title:"\u653b\u64ca",textColor:["#ffffff","#ffffff"]},{id:3,title:"\u6230\u6280",textColor:["#ffffff","#ffffff"]},{id:4,title:"\u8fd4\u56de",textColor:["#ffffff","#ffffff"]}])),y=Object(r.a)(h,2),j=y[0],b=y[1];t.map((function(e){return x.push({x:e.x,y:e.y})}));var g=function(e){e.noop;return j.map((function(e,t){return Object(o.jsx)(l.Text,{interactive:!0,buttonMode:!0,text:e.get("title"),x:10,y:5+25*t,style:new p.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:e.get("textColor").toJS()}),pointerover:function(){b((function(e){return e.setIn([t,"textColor",1],"#00ff99")}))},pointerout:function(){b((function(e){return e.setIn([t,"textColor",1],"#ffffff")}))},pointertap:function(t){switch(e.get("id")){case 1:f({key:i,type:"MOVE"}),d(S({position:{x:n.x,y:n.y},step:n.step,changeColor:"0x4361ee",currentChessPositions:x})),d(z({key:i}));break;case 4:u(!0),d(z({key:i}));break;default:return console.log(t.target)}}},t)}))};return Object(o.jsx)(l.Graphics,{x:a,y:c,zIndex:2,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(0,0,60,110,8),e.endFill()},children:Object(o.jsx)(g,{})})},N=n(11),D=function(e){var t=e.props,n=t.chess,s=t.currentChess,i=t.tipStatus,a=t.dispatch,c=t.setMoveStep,r=t.setTipStatus;return Object(o.jsxs)(l.Graphics,{x:400,y:300,zIndex:99,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(-90,-50,180,100,8),e.endFill()},children:[Object(o.jsx)(l.Text,{text:i.title,anchor:.5,x:0,y:-20,style:new p.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]})}),Object(o.jsx)(l.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u78ba\u5b9a",x:-30,y:20,style:new p.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(s.type){case"MOVE":a(T({key:s.key,changeX:i.position.x,changeY:i.position.y})),a(O({position:{x:n[s.key].x,y:n[s.key].y},step:n[s.key].step,changeColor:"0x383838"})),c(!0),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{status:!1})}));break;default:return}}}),Object(o.jsx)(l.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u53d6\u6d88",x:30,y:20,style:new p.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(s.type){case"MOVE":a(O({position:{x:n[s.key].x,y:n[s.key].y},step:n[s.key].step,changeColor:"0x383838"})),c(!0),r((function(e){return Object(N.a)(Object(N.a)({},e),{},{status:!1})}));break;default:return}}})]})},H=function(){var e=Object(s.useState)({key:0,type:"MOVE"}),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)({title:"",status:!1,position:{x:0,y:0}}),f=Object(r.a)(c,2),u=f[0],p=f[1],d=Object(s.useState)(!0),x=Object(r.a)(d,2),h=x[0],y=x[1],j=Object(m.c)((function(e){return e.chessMap})),b=Object(m.c)((function(e){return e.chess})),g=Object(m.b)();return Object(o.jsxs)(l.Stage,{width:800,height:600,options:{autoDensity:!0,antialias:!0,backgroundColor:75306},children:[Object(o.jsx)(k,{reduxProps:{chess:b,chessMap:j,currentChess:n,dispatch:g,setTipStatus:p}}),Object(o.jsx)(l.Container,{sortableChildren:!0,children:b.map((function(e,t){return Object(o.jsxs)(i.a.Fragment,{children:[Object(o.jsx)(l.Sprite,{interactive:h,buttonMode:!0,width:40,height:40,x:40*e.x,y:40*e.y,zIndex:1,pointerover:function(){g(O({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x09bc8a"}))},pointerout:function(){g(O({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x383838"}))},pointertap:function(){y(!1),g(z({key:t})),g(O({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x383838"}))},image:F.resources["".concat(e.name,"-head-default")].data}),e.boardStatus&&Object(o.jsx)(V,{ChessData:b,ChessVal:e,ChessKey:t,positionX:40*e.x+40,positionY:40*e.y,setCurrentChess:a,setMoveStep:y,dispatch:g})]},t)}))}),u.status&&Object(o.jsx)(D,{props:{chess:b,currentChess:n,tipStatus:u,dispatch:g,setMoveStep:y,setTipStatus:p}})]})};function q(){var e=Object(f.a)(["\n  position: relative;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  width:100%;\n  height:100vh;\n  .loading {\n    color: #fff;\n    font-size:24px;\n  }\n"]);return q=function(){return e},e}function G(){var e=Object(f.a)(["\n  body { background:#1d2430; }\n"]);return G=function(){return e},e}var R=Object(u.a)(G()),X=u.b.div(q()),Y=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(s.useEffect)((function(){F.onComplete.add((function(){i(!0)}))})),Object(o.jsxs)(X,{children:[Object(o.jsx)(R,{}),n?Object(o.jsx)(H,{}):Object(o.jsx)("span",{className:"loading",children:"Loading.."})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,o=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),o(e),s(e),i(e),a(e)}))},L=n(3),B=Object(L.c)({chess:M,chessMap:g}),K=Object(L.e)(B);c.a.render(Object(o.jsx)(m.a,{store:K,children:Object(o.jsx)(Y,{})}),document.getElementById("root")),J()}},[[55,1,2]]]);
//# sourceMappingURL=main.e7946d71.chunk.js.map