(this["webpackJsonpdemon-slayer"]=this["webpackJsonpdemon-slayer"]||[]).push([[0],{74:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),i=n.n(s),c=n(17),o=n.n(c),r=n(4),f=n(19),l=n(22),u=n(10),x=n(2),y=n(5),d=n(13),p={x:0,y:0,checkStatus:!1,boardStatus:!1,debut:!1,roundAttack:!1},h=Object(d.a)({name:"chess",initialState:[Object(y.a)({name:"Tanjirou",cn:"\u7ac3\u9580 \u78b3\u6cbb\u90ce",step:3,attack:2,hp:1500,sp:100,dodge:65,fullValue:{hp:1500,sp:100},skill:[{name:"\u65ac\u64ca",atk:50,sp:0,hitfix:0},{name:"\u53c4\u4e4b\u578b\u2015\u6d41\u6d41\u821e",atk:200,sp:5,hitfix:10},{name:"\u634c\u4e4b\u578b\u2015\u6edd\u58fa",atk:200,sp:5,hitfix:5},{name:"\u62fe\u4e4b\u578b\u2015\u751f\u751f\u6d41\u8f49",atk:500,sp:10,hitfix:20}]},p),Object(y.a)({name:"Nezuko",step:2,attack:1,hp:2200,sp:200,dodge:50,fullValue:{hp:2200,sp:200},skill:[{name:"\u722a\u64ca",atk:50,sp:0,hitfix:0},{name:"\u8e22\u64ca",atk:120,sp:5,hitfix:0},{name:"\u8840\u9b3c\u8853",atk:1e3,sp:100,hitfix:0}]},p),Object(y.a)({name:"Inosuke",cn:"\u5634\u5e73 \u4f0a\u4e4b\u52a9",step:4,attack:3,hp:1800,sp:80,dodge:40,fullValue:{hp:1800,sp:80},skill:[{name:"\u65ac\u64ca",atk:50,sp:0,hitfix:0},{name:"\u58f9\u4e4b\u7259\u2015\u7a7f\u900f\u523a\u5c04",atk:120,sp:2,hitfix:0},{name:"\u8cb3\u4e4b\u7259\u2015\u5229\u5203\u5c0d\u5288",atk:200,sp:5,hitfix:0},{name:"\u53c4\u4e4b\u7259\u2015\u7360\u7259\u6495\u626f",atk:400,sp:8,hitfix:0}]},p)],reducers:{stageDebut:function(e,t){var n=t.payload.isDebutChess;e.map((function(t,a){return n.map((function(n){return t.name===n.get("name")?(e[a].debut=!0,e[a].x=n.get("x"),e[a].y=n.get("y")):null}))}))},chessMove:function(e,t){var n=t.payload,a=n.key,s=n.changeX,i=n.changeY;e[a].x=s,e[a].y=i},chessSelected:function(e,t){var n=t.payload.key;e[n].boardStatus=!e[n].boardStatus},chessCheckStatus:function(e,t){var n=t.payload.key;e[n].checkStatus=!e[n].checkStatus},chessAttackResult:function(e,t){var n=t.payload,a=n.key,s=n.lessSp;e[a].sp-=s}}}),j=h.reducer,b=h.actions,S=b.stageDebut,k=b.chessMove,m=b.chessSelected,g=b.chessCheckStatus,O=b.chessAttackResult,v={x:0,y:0,checkStatus:!1,boardStatus:!1,debut:!1,roundAttack:!1},C=Object(d.a)({name:"enemyChess",initialState:[Object(y.a)({name:"Teoni",cn:"\u624b\u9b3c",hp:2e3,sp:100,dodge:20,fullValue:{hp:2e3,sp:100},skill:[{name:"\u80e1\u4e82\u6bc6\u6253",atk:50,sp:0,hitfix:10},{name:"\u4f60\u662f\u7b2c\u5341\u56db\u500b",atk:300,sp:10,hitfix:20}]},v),Object(y.a)({name:"Nomanooni",cn:"\u6cbc\u9b3c",hp:1500,sp:200,dodge:30,fullValue:{hp:1500,sp:200},skill:[{name:"\u722a\u64ca",atk:70,sp:0,hitfix:15},{name:"\u5206\u8eab\u653b\u64ca",atk:600,sp:15,hitfix:30}]},v)],reducers:{enemyStageDebut:function(e,t){var n=t.payload.isDebutChess;e.map((function(t,a){return n.map((function(n){return t.name===n.get("name")?(e[a].debut=!0,e[a].x=n.get("x"),e[a].y=n.get("y")):null}))}))},enemyChessSelected:function(e,t){var n=t.payload.key;e[n].boardStatus=!e[n].boardStatus},enemyChessCheckStatus:function(e,t){var n=t.payload.key;e[n].checkStatus=!e[n].checkStatus},enemyChessDefense:function(e,t){var n=t.payload,a=n.key,s=n.damage;e[a].hp-=s},enemyChessDead:function(e,t){var n=t.payload.key;e[n].debut=!1,e[n].hp=e[n].fullValue.hp,e[n].sp=e[n].fullValue.sp}}}),w=C.reducer,z=C.actions,T=z.enemyStageDebut,F=z.enemyChessSelected,I=z.enemyChessCheckStatus,P=z.enemyChessDefense,M=z.enemyChessDead,H=n(3),R=20,q=15,G=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=[],n=0;n<q;n++)t.push(e(n,"0x383838"));return t}((function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],a=0;a<R;a++)n.push({x:a,y:e,color:t,alpha:0,zIndex:1,isInteractive:!1});return n})),V=Object(d.a)({name:"chessMap",initialState:G,reducers:{MoveSelect:function(e,t){for(var n=t.payload,a=n.position,s=n.step,i=n.changeColor,c=n.alphaVal,o=void 0===c?1:c,r=0;r<s+1;r++)a.x+r<=R-1&&(e[a.y][a.x+r].color=i,e[a.y][a.x+r].isInteractive=!1,e[a.y][a.x+r].alpha=o,e[a.y][a.x+r].zIndex=1),a.y+r<=q-1&&(e[a.y+r][a.x].color=i,e[a.y+r][a.x].isInteractive=!1,e[a.y+r][a.x].alpha=o,e[a.y+r][a.x].zIndex=1),a.x-r>=0&&(e[a.y][a.x-r].color=i,e[a.y][a.x-r].isInteractive=!1,e[a.y][a.x-r].alpha=o,e[a.y][a.x-r].zIndex=1),a.y-r>=0&&(e[a.y-r][a.x].color=i,e[a.y-r][a.x].isInteractive=!1,e[a.y-r][a.x].alpha=o,e[a.y-r][a.x].zIndex=1)},GetMove:function(e,t){for(var n=t.payload,a=n.position,s=n.step,i=n.changeColor,c=n.currentChessPositions,o=0;o<s+1;o++)a.x+o<=R-1&&(e[a.y][a.x+o].color=i,e[a.y][a.x+o].isInteractive=!0,e[a.y][a.x+o].alpha=.5,e[a.y][a.x+o].zIndex=1),a.y+o<=q-1&&(e[a.y+o][a.x].color=i,e[a.y+o][a.x].isInteractive=!0,e[a.y+o][a.x].alpha=.5,e[a.y+o][a.x].zIndex=1,e[a.y][a.x-o].alpha=.5,e[a.y][a.x-o].zIndex=1),a.x-o>=0&&(e[a.y][a.x-o].color=i,e[a.y][a.x-o].isInteractive=!0),a.y-o>=0&&(e[a.y-o][a.x].color=i,e[a.y-o][a.x].isInteractive=!0,e[a.y-o][a.x].alpha=.5,e[a.y-o][a.x].zIndex=1);c.map((function(t){return e[t.y][t.x].isInteractive=!1}))},GetAttack:function(e,t){for(var n=t.payload,a=n.position,s=n.step,i=n.changeColor,c=n.currentChessPositions,o=0;o<s+1;o++)a.x+o<=R-1&&(e[a.y][a.x+o].color=i,e[a.y][a.x+o].isInteractive=!0,e[a.y][a.x+o].alpha=.5,e[a.y][a.x+o].zIndex=3),a.y+o<=q-1&&(e[a.y+o][a.x].color=i,e[a.y+o][a.x].isInteractive=!0,e[a.y+o][a.x].alpha=.5,e[a.y+o][a.x].zIndex=3),a.x-o>=0&&(e[a.y][a.x-o].color=i,e[a.y][a.x-o].isInteractive=!0,e[a.y][a.x-o].alpha=.5,e[a.y][a.x-o].zIndex=3),a.y-o>=0&&(e[a.y-o][a.x].color=i,e[a.y-o][a.x].isInteractive=!0,e[a.y-o][a.x].alpha=.5,e[a.y-o][a.x].zIndex=3);c.map((function(t){return e[t.y][t.x].isInteractive=!1,e[t.y][t.x].zIndex=1}))}}}),D=V.reducer,A=V.actions,E=A.MoveSelect,X=A.GetMove,B=A.GetAttack,N=H.r.WHITE,K=function(e){var t=e.reduxProps,n=t.chess,s=t.enemyChess,c=t.chessMap,o=t.currentChess,r=t.dispatch,f=t.setTipStatus,l=t.setMoveStep,u=t.setBattleInfo;return Object(a.jsx)(i.a.Fragment,{children:c.map((function(e){return e.map((function(e,t){return Object(a.jsx)(x.Sprite,{interactive:e.isInteractive,buttonMode:e.isInteractive,zIndex:e.zIndex,width:40,height:40,x:40*e.x,y:40*e.y,tint:e.color,alpha:e.alpha,texture:N,pointertap:function(){switch(o.type){case"MOVE":f({title:"\u78ba\u5b9a\u79fb\u52d5?",status:!0,position:{x:e.x,y:e.y}}),r(E({position:{x:n[o.key].x,y:n[o.key].y},step:n[o.key].step,changeColor:"0x06d6a0",alphaVal:.5}));break;case"ATTACK":if(function(e,t){var n=!1;return s.map((function(a){return a.debut&&e===a.x&&t===a.y?n=!0:null})),n}(e.x,e.y)){var t=function(e,t){var n={};return s.map((function(a,s){return a.debut&&e===a.x&&t===a.y?n=Object(y.a)(Object(y.a)({},a),{},{key:s}):null})),n}(e.x,e.y);u({status:!0,attacker:Object(y.a)({key:o.key},n[o.key]),target:Object(y.a)({key:t.key},t)}),r(E({position:{x:n[o.key].x,y:n[o.key].y},step:n[o.key].attack,changeColor:"0x383838",alphaVal:0}))}else l(!0),r(E({position:{x:n[o.key].x,y:n[o.key].y},step:n[o.key].acttack,changeColor:"0x383838",alphaVal:0}));break;default:return}}},t)}))}))})},L=function(e){var t=e.props,n=t.chess,s=t.currentChess,i=t.tipStatus,c=t.dispatch,o=t.setMoveStep,r=t.setTipStatus;return Object(a.jsxs)(x.Graphics,{x:400,y:300,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(-90,-50,180,100,8),e.endFill()},children:[Object(a.jsx)(x.Text,{text:i.title,anchor:.5,x:0,y:-20,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]})}),Object(a.jsx)(x.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u78ba\u5b9a",x:-30,y:20,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(s.type){case"MOVE":c(k({key:s.key,changeX:i.position.x,changeY:i.position.y})),c(E({position:{x:n[s.key].x,y:n[s.key].y},step:n[s.key].step,changeColor:"0x383838",alphaVal:0})),o(!0),r((function(e){return Object(y.a)(Object(y.a)({},e),{},{status:!1})}));break;default:return}}}),Object(a.jsx)(x.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u53d6\u6d88",x:30,y:20,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(s.type){case"MOVE":c(E({position:{x:n[s.key].x,y:n[s.key].y},step:n[s.key].step,changeColor:"0x383838",alphaVal:0})),o(!0),r((function(e){return Object(y.a)(Object(y.a)({},e),{},{status:!1})}));break;default:return}}})]})},Y=n(12),U=Object(Y.a)({stageOne:{debutChess:[{name:"Tanjirou",x:3,y:7}],debutEnemyChess:[{name:"Teoni",x:16,y:7}],isWin:function(e){var t=0;return e.map((function(e){return e.debut?t+=e.hp:null})),!(t>0)},isLose:function(e){var t=0;return e.map((function(e){return e.debut?t+=e.hp:null})),!(t>0)}},stageTwo:{debutChess:[{name:"Tanjirou",x:3,y:9},{name:"Nezuko",x:3,y:11}],debutEnemyChess:[{name:"Nomanooni",x:16,y:7}]}}),W=function(e){var t=e.props,n=t.stageStatus,i=t.chess,c=t.currentChess,o=t.enemyChess,f=t.usualTip,l=t.setMoveStep,u=t.setUsualTip,y=t.setCurrentChess,d=Object(s.useState)(["#ffffff","#ffffff"]),p=Object(r.a)(d,2),h=p[0],j=p[1];return Object(a.jsxs)(x.Graphics,{x:400,y:300,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(-90,-50,180,100,8),e.endFill()},children:[Object(a.jsx)(x.Text,{text:f.title,anchor:.5,x:0,y:-20,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:h})}),Object(a.jsx)(x.Text,{interactive:!0,buttonMode:!0,anchor:.5,text:"\u78ba\u5b9a",x:0,y:20,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:["#ffffff","#ffffff"]}),pointertap:function(){switch(c.type){case"ATTACK":var e=U.getIn([n,"isWin"]),t=U.getIn([n,"isLose"]);e(o)?(j(["#ffffff","#06d6a0"]),y({key:0,type:"CHECKWIN"}),u({title:"\u4f5c\u6230\u7372\u52dd!",status:!0})):t(i)?(j(["#dc2f02","#d00000"]),y({key:0,type:"CHECKLOSE"}),u({title:"\u4f5c\u6230\u5931\u6557!",status:!0})):(l(!0),u({title:"",status:!1}));break;case"CHECKWIN":case"CHECKLOSE":l(!0),j(["#ffffff","#ffffff"]),u({title:"",status:!1});break;default:return}}})]})},J=new H.h,Q="localhost"===window.location.hostname?"./Demon-Slayer/":"./";J.add("Tanjirou-head-default","".concat(Q,"imgs/Tanjirou/head-default.png")).add("Tanjirou-fight-typeA","".concat(Q,"imgs/Tanjirou/fight-typeA.png")).add("Tanjirou-fight-typeB","".concat(Q,"imgs/Tanjirou/fight-typeB.png")).add("Nezuko-head-default","".concat(Q,"imgs/Nezuko/head-default.jpg")).add("Nezuko-fight","".concat(Q,"imgs/Nezuko/fight.png")).add("Inosuke-head-default","".concat(Q,"imgs/Inosuke/head-default.jpg")).add("Inosuke-fight","".concat(Q,"imgs/Inosuke/fight.png")).add("Teoni-head-default","".concat(Q,"imgs/Teoni/head-default.png")).add("Teoni-fight","".concat(Q,"imgs/Teoni/fight.png")).add("Nomanooni-head-default","".concat(Q,"imgs/Nomanooni/head-default.jpg")).add("Nomanooni-fight","".concat(Q,"imgs/Nomanooni/fight.png")).add("stageOne-BG","".concat(Q,"imgs/background/stage1-background.png")).add("stageOne-main-BG","".concat(Q,"imgs/background/stage1-main-background.jpg")).load();var Z=function(e){var t=e.props,n=t.battleInfo,c=t.setMoveStep,o=t.setBattleInfo,f=t.setAnimeShow,l=t.dispatch,u=Object(s.useState)({key:0}),y=Object(r.a)(u,2),d=y[0],p=y[1],h=function(e){var t=e.pX,n=void 0===t?0:t,s=e.pY,c=void 0===s?0:s,o=e.data;return Object(a.jsxs)(x.Container,{x:n,y:c,sortableChildren:!0,children:[Object(a.jsx)(x.Text,{text:"\u653b",x:220,y:0,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:30,fill:["#ffffff","#00ff99"]})}),Object(a.jsx)(x.Text,{text:o.cn,x:60,y:-3,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{text:"".concat(o.hp," / ").concat(o.fullValue.hp),x:60,y:17,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ff6b6b"})}),Object(a.jsx)(x.Text,{text:"".concat(o.sp," / ").concat(o.fullValue.sp),x:60,y:34,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#0466c8"})}),Object(a.jsx)(x.Sprite,{width:50,height:50,x:0,y:0,image:J.resources["".concat(o.name,"-head-default")].data}),Object(a.jsx)(x.Text,{text:"\u62db\u5f0f\u9078\u64c7\uff1a",x:0,y:80,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(x.Graphics,{x:0,y:115,zIndex:1,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x0f0f1b"),e.drawRoundedRect(0,0,240,180,8),e.endFill()}}),o.skill.map((function(e,t){var n=o.sp-e.sp>=0;return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(x.Text,{zIndex:2,interactive:n,buttonMode:!0,text:e.name,x:20,y:130+24*t,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:d.key===t&&n?["#ffffff","#00ff99"]:n?"#ffffff":"#8d99ae",fontWeight:d.key===t?600:300}),pointertap:function(){return p({key:t})}})},t)}))]})},j=function(e){var t=e.pX,n=void 0===t?0:t,s=e.pY,i=void 0===s?0:s,c=e.data;return Object(a.jsxs)(x.Container,{x:n,y:i,sortableChildren:!0,children:[Object(a.jsx)(x.Text,{text:"\u9632",x:0,y:0,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:30,fill:["#ffffff","#ee6c4d"]})}),Object(a.jsx)(x.Text,{text:c.cn,anchor:{x:1,y:0},x:190,y:-3,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{text:"".concat(c.hp," / ").concat(c.fullValue.hp),anchor:{x:1,y:0},x:190,y:17,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ff6b6b"})}),Object(a.jsx)(x.Text,{text:"".concat(c.sp," / ").concat(c.fullValue.sp),anchor:{x:1,y:0},x:190,y:34,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#0466c8"})}),Object(a.jsx)(x.Sprite,{width:50,height:50,x:200,y:0,image:J.resources["".concat(c.name,"-head-default")].data})]})},b=function(e){var t=e.pX,n=e.pY,s=e.data;return Object(a.jsxs)(x.Container,{x:t,y:n,sortableChildren:!0,children:[Object(a.jsx)(x.Graphics,{x:0,y:0,zIndex:1,draw:function(e){e.lineStyle(1,"0x00ff99",1),e.beginFill("0x0f0f1b"),e.drawRoundedRect(0,0,265,215,8),e.endFill()}}),Object(a.jsx)(x.Text,{text:"\u62db\u5f0f\uff1a",zIndex:2,x:20,y:20,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{text:"".concat(s.attacker.skill[d.key].name),zIndex:2,x:80,y:22,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#00ff99"})}),Object(a.jsx)(x.Text,{text:"\u653b\u64ca\u529b\uff1a",zIndex:2,x:20,y:50,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{text:"".concat(s.attacker.skill[d.key].atk),zIndex:2,x:100,y:52,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#fdc500"})}),Object(a.jsx)(x.Text,{text:"\u547d\u4e2d\u7387\uff1a",zIndex:2,x:20,y:80,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{text:"".concat(100+s.attacker.skill[d.key].hitfix-s.target.dodge,"%"),zIndex:2,x:100,y:82,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{text:"\u6d88\u8017\uff1a",zIndex:2,x:20,y:110,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{text:"".concat(s.attacker.skill[d.key].sp),zIndex:2,x:80,y:110,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#0466c8"})})]})};return Object(a.jsxs)(x.Graphics,{x:400,y:300,zIndex:99,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(-300,-200,600,400,8),e.endFill()},children:[Object(a.jsx)(h,{pX:-270,pY:-180,data:n.attacker}),Object(a.jsx)(j,{pX:20,pY:-180,data:n.target}),Object(a.jsx)(b,{pX:0,pY:-100,data:n}),Object(a.jsx)(x.Text,{interactive:!0,buttonMode:!0,text:"\u653b\u64ca",anchor:.5,x:180,y:160,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"}),pointertap:function(){var e,t,a=(e=n.attacker.skill[d.key].hitfix,t=n.target.dodge,!(100+e-t<Math.round(100*Math.random()+1)));l(O({key:n.attacker.key,lessSp:n.attacker.skill[d.key].sp})),a&&l(P({key:n.target.key,damage:n.attacker.skill[d.key].atk})),f({status:!0,type:"USER",attacker:{key:n.attacker.key,skill:n.attacker.skill[d.key],prevSP:n.attacker.sp},target:{key:n.target.key,isHit:a,prevLife:n.target.hp}}),o({status:!1,attacker:{key:""},target:{key:""}})}}),Object(a.jsx)(x.Text,{interactive:!0,buttonMode:!0,text:"\u53d6\u6d88",anchor:.5,x:240,y:160,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:"#ffffff"}),pointertap:function(){c(!0),o({status:!1,attacker:{key:""},target:{key:""}})}})]})},$=n(15),_=function(e){var t=e.attacker,n=void 0===t?{}:t,s=e.skill,i=void 0===s?{}:s,c=e.setBGstatus;switch(n.name){case"Tanjirou":return Object(a.jsx)(ee,{skillName:i.name,attackerName:n.name,setBGstatus:c});default:return}},ee=function(e){var t=e.skillName,n=e.attackerName,i=e.setBGstatus,c=Object(s.useState)({x:0,y:0,tension:170}),o=Object(r.a)(c,2),f=o[0],l=o[1];switch(Object(s.useEffect)((function(){!function(e,t,n){t({x:550,y:50,tension:100});var a=function(){var e=setTimeout((function(){t({x:0,y:50,tension:100}),n({type:"SKILL"}),s()}),3e3);return function(){return clearTimeout(e)}},s=function(){var e=setTimeout((function(){t({x:-250,y:50,tension:1e3}),n({type:"STANDBY"}),i()}),3e3);return function(){return clearTimeout(e)}},i=function(){var e=setTimeout((function(){t({x:550,y:50,tension:50})}),3e3);return function(){return clearTimeout(e)}};setTimeout((function(){t({x:250,y:50,tension:100}),a()}),2e3)}(0,l,i)}),[t,i]),t){case"\u65ac\u64ca":default:return Object(a.jsx)($.Spring,{from:{x:550,y:50},to:{x:f.x,y:f.y},config:{mass:1,tension:f.tension,friction:20},children:function(e){return Object(a.jsx)(x.Sprite,Object(y.a)({zIndex:2,width:200,height:200,anchor:.5,image:J.resources["".concat(n,"-fight-typeA")].data},e))}})}},te=function(e){var t=e.props,n=t.stageStatus,i=t.animeShow,c=t.chess,o=t.enemyChess,f=t.setMoveStep,l=t.setAnimeShow,u=t.setUsualTip,d=t.dispatch,p=i.target,h=Object(s.useState)(i.target.prevLife),j=Object(r.a)(h,2),b=j[0],S=(j[1],function(e){var t=e.attacker,n=void 0===t?{}:t,s=e.target,i=void 0===s?{}:s;return Object(a.jsx)(x.Graphics,{x:-400,y:-300,zIndex:98,draw:function(e){e.beginFill("0x000f23"),e.drawRoundedRect(0,0,800,80,0),e.endFill()},children:Object(a.jsxs)(x.Container,{sortableChildren:!0,children:[Object(a.jsx)(x.Graphics,{x:370,y:40,draw:function(e){e.beginFill("0x364958"),e.drawRoundedRect(-21,-21,42,42,50),e.endFill()},children:Object(a.jsx)(x.Text,{text:"\u5b88",x:0,y:0,anchor:.5,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:24,fill:"#ffffff"})})}),Object(a.jsx)(x.Graphics,{x:420,y:40,draw:function(e){e.beginFill("0xfe7f2d"),e.drawRoundedRect(-21,-21,42,42,50),e.endFill()},children:Object(a.jsx)(x.Text,{text:"\u653b",x:0,y:0,anchor:.5,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:24,fill:"#ffffff"})})}),Object(a.jsx)(x.Sprite,{width:50,height:50,x:50,y:15,image:J.resources["".concat(i.name,"-head-default")].data}),Object(a.jsx)(x.Text,{text:"".concat(b," / ").concat(i.fullValue.hp),anchor:{x:1,y:0},x:320,y:10,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#e71d36"})}),Object(a.jsx)(x.Graphics,{x:320,y:35,zIndex:1,draw:function(e){e.beginFill("0x333533"),e.drawRoundedRect(0,0,-200,10,0),e.endFill()}}),Object(a.jsx)(x.Graphics,{x:320,y:35,zIndex:2,draw:function(e){e.beginFill("0xe71d36"),e.drawRoundedRect(0,0,-200,10,0),e.endFill()}}),Object(a.jsx)(x.Sprite,{width:50,height:50,x:690,y:15,image:J.resources["".concat(n.name,"-head-default")].data}),Object(a.jsx)(x.Text,{text:"".concat(n.hp," / ").concat(n.fullValue.hp),anchor:{x:1,y:0},x:670,y:10,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#e71d36"})}),Object(a.jsx)(x.Graphics,{x:670,y:35,zIndex:1,draw:function(e){e.beginFill("0x333533"),e.drawRoundedRect(0,0,-200,10,0),e.endFill()}}),Object(a.jsx)(x.Graphics,{x:670,y:35,zIndex:2,draw:function(e){e.beginFill("0xe71d36"),e.drawRoundedRect(0,0,-200,10,0),e.endFill()}})]})})}),k=function(){return Object(a.jsx)(x.Graphics,{x:-400,y:150,zIndex:98,draw:function(e){e.beginFill("0x000f23"),e.drawRoundedRect(0,0,800,150,0),e.endFill()}})},m=function(){var e=Object(s.useState)({type:"STANDBY"}),t=Object(r.a)(e,2),h=t[0],j=t[1],b=Object(s.useState)({toX:400,duration:2e4}),m=Object(r.a)(b,2),g=m[0],O=m[1],v=Object(s.useState)({toX:400,duration:500}),C=Object(r.a)(v,2),w=C[0],z=C[1];return Object(a.jsxs)(x.Container,{sortableChildren:!0,children:["STANDBY"===h.type&&Object(a.jsx)($.Spring,{from:{x:-400,y:-100},to:{x:g.toX,y:-100},config:{duration:g.duration},onRest:function(){-400===g.toX?O({toX:400,duration:2e4}):O({toX:-400,duration:-1e3})},children:function(e){return Object(a.jsx)(x.Sprite,Object(y.a)({zIndex:1,width:1600,height:500,anchor:.5,image:J.resources["".concat(n,"-BG")].data},e))}}),"SKILL"===h.type&&Object(a.jsx)($.Spring,{from:{x:-400,y:-100},to:{x:w.toX,y:-100},config:{duration:w.duration},onRest:function(){-400===w.toX?z({toX:400,duration:500}):z({toX:-400,duration:-1e3})},children:function(e){return Object(a.jsx)(x.Sprite,Object(y.a)({zIndex:1,width:1600,height:500,anchor:.5,image:J.resources["".concat(n,"-BG")].data},e))}}),"USER"===i.type?Object(a.jsx)(S,{attacker:c["number"!==typeof i.attacker.key?0:i.attacker.key],target:o["number"!==typeof i.target.key?0:i.target.key]}):Object(a.jsx)(S,{attacker:o["number"!==typeof i.target.key?0:i.target.key],target:c["number"!==typeof i.attacker.key?0:i.attacker.key]}),Object(a.jsx)(_,{attacker:c["number"!==typeof i.attacker.key?0:i.attacker.key],skill:i.attacker.skill,setBGstatus:j}),Object(a.jsx)(k,{}),Object(a.jsx)(x.Graphics,{zIndex:99,interactive:!0,buttonMode:!0,x:315,y:255,draw:function(e){e.beginFill("0x586f7c"),e.drawRoundedRect(-6,-3,75,30,6),e.endFill()},pointertap:function(){l({status:!1,type:"",attacker:{key:"",skill:{},prevSP:0},target:{key:"",isHit:!1,prevLife:0}}),"USER"===i.type&&o[p.key].hp<=0?(d(M({key:p.key})),u({title:"\u5df2\u64ca\u6557 ".concat(o[p.key].cn,"!"),status:!0})):f(!0)},children:Object(a.jsx)(x.Text,{text:"\u6230\u9b25 off",x:0,y:0,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:18,fill:"#c0fdff"})})})]})};return Object(a.jsx)(x.Graphics,{x:400,y:300,zIndex:99,draw:function(e){e.beginFill("0x011627"),e.drawRoundedRect(-400,-300,800,600,0),e.endFill()},children:Object(a.jsx)(m,{})})},ne=function(e){var t=e.ChessData,n=e.ChessVal,i=e.ChessKey,c=e.EnemyChessData,o=e.positionX,f=e.positionY,l=e.setCurrentChess,u=e.setMoveStep,y=e.dispatch,d=720,p=490,h=[],j=[],b=Object(s.useState)(Object(Y.a)([{id:1,title:"\u79fb\u52d5",textColor:["#ffffff","#ffffff"]},{id:2,title:"\u653b\u64ca",textColor:["#ffffff","#ffffff"]},{id:3,title:"\u72c0\u614b",textColor:["#ffffff","#ffffff"]},{id:4,title:"\u8fd4\u56de",textColor:["#ffffff","#ffffff"]}])),S=Object(r.a)(b,2),k=S[0],O=S[1];t.map((function(e){return h.push({x:e.x,y:e.y}),j.push({x:e.x,y:e.y})})),c.map((function(e){return h.push({x:e.x,y:e.y})}));var v=function(e){e.noop;var t=function(e,t,n){for(var a=!1,s=c.filter((function(e){return e.debut})),i=19,o=14,r=[],f=0;f<n;f++){var l=e+(f+1)>=i?i:e+(f+1),u=t+(f+1)>=o?o:t+(f+1),x=e-(f+1)<=0?0:e-(f+1),y=t-(f+1)<=0?0:t-(f+1);r.push({x:l,y:t},{x:x,y:t},{x:e,y:u},{x:e,y:y})}return s.map((function(e){return r.map((function(t){return e.x===t.x&&e.y===t.y?a=!0:null}))})),a}(n.x,n.y,n.attack);return k.map((function(e,s){return Object(a.jsx)(x.Text,{interactive:2!==e.get("id")||t,buttonMode:!0,text:e.get("title"),x:10,y:5+25*s,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:2!==e.get("id")||t?e.get("textColor").toJS():"#8d99ae"}),pointerover:function(){O((function(e){return e.setIn([s,"textColor",1],"#00ff99")}))},pointerout:function(){O((function(e){return e.setIn([s,"textColor",1],"#ffffff")}))},pointertap:function(t){switch(e.get("id")){case 1:l({key:i,type:"MOVE"}),y(X({position:{x:n.x,y:n.y},step:n.step,changeColor:"0x06d6a0",currentChessPositions:h})),y(m({key:i}));break;case 2:l({key:i,type:"ATTACK"}),y(m({key:i})),y(B({position:{x:n.x,y:n.y},step:n.attack,changeColor:"0x00bbf9",currentChessPositions:j}));break;case 3:l({key:i,type:"STATUS"}),y(g({key:i})),y(m({key:i}));break;case 4:u(!0),y(m({key:i}));break;default:return console.log(t.target)}}},s)}))};return Object(a.jsx)(x.Graphics,{x:800!==o?o:d,y:560!==f&&520!==f?f:p,zIndex:3,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(0,0,60,110,8),e.endFill()},children:Object(a.jsx)(v,{})})},ae=function(e){var t=e.ChessData,n=e.ChessKey,s=e.CheckStatus,c=e.setMoveStep,o=e.dispatch,r=function(){return t.skill.map((function(e,t){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(x.Text,{x:-40,y:22*t-70,text:"".concat(e.name),style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffb700"})}),Object(a.jsx)(x.Text,{x:16*e.name.length-35,y:22*t-70,text:"ATK:".concat(e.atk,"(").concat(e.sp,"SP)"),style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:14,fill:"#ffffff"})})]},t)}))};return Object(a.jsxs)(x.Graphics,{x:400,y:300,zIndex:99,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(-250,-150,500,300,8),e.endFill()},children:[Object(a.jsx)(x.Graphics,{x:220,y:-120,interactive:!0,buttonMode:!0,pointertap:function(e){c(!0),o(s({key:n}))},draw:function(e){e.beginFill("0x02040f"),e.drawRoundedRect(-15,-15,30,30,50),e.endFill()},children:Object(a.jsx)(x.Text,{anchor:.5,text:"X",style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})})}),Object(a.jsx)(x.Sprite,{width:80,height:80,x:-200,y:-90,image:J.resources["".concat(t.name,"-head-default")].data}),Object(a.jsx)(x.Text,{x:-200,y:10,text:t.cn,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{x:-200,y:35,text:"HP:",style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{x:-170,y:35,text:"".concat(t.hp," / ").concat(t.fullValue.hp),style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ff6b6b"})}),Object(a.jsx)(x.Text,{x:-200,y:60,text:"SP:",style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(x.Text,{x:-170,y:60,text:"".concat(t.sp," / ").concat(t.fullValue.sp),style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#0466c8"})}),Object(a.jsx)(x.Text,{x:-50,y:-95,text:"\u62db\u5f0f",style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,fill:"#ffffff"})}),Object(a.jsx)(r,{})]})},se=function(e){var t=e.chessProps,n=t.chess,s=t.enemyChess,c=t.moveStep,o=void 0===c?Boolean:c,r=t.setMoveStep,f=t.setCurrentChess,l=t.dispatch;return n.map((function(e,t){return Object(a.jsxs)(i.a.Fragment,{children:[e.debut&&Object(a.jsx)(x.Sprite,{interactive:o,buttonMode:!0,width:40,height:40,x:40*e.x,y:40*e.y,zIndex:2,pointerover:function(){l(E({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x06d6a0",alphaVal:.5}))},pointerout:function(){l(E({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x383838",alphaVal:0}))},pointertap:function(){r(!1),l(m({key:t})),l(E({position:{x:e.x,y:e.y},step:e.step,changeColor:"0x383838",alphaVal:0}))},image:J.resources["".concat(e.name,"-head-default")].data}),e.boardStatus&&Object(a.jsx)(ne,{ChessData:n,ChessVal:e,ChessKey:t,EnemyChessData:s,positionX:40*e.x+40,positionY:40*e.y,setCurrentChess:f,setMoveStep:r,dispatch:l}),e.checkStatus&&Object(a.jsx)(ae,{ChessData:e,ChessKey:t,CheckStatus:g,setMoveStep:r,dispatch:l})]},t)}))},ie=function(e){var t=e.ChessKey,n=e.positionX,i=e.positionY,c=e.setMoveStep,o=e.dispatch,f=720,l=535,u=Object(s.useState)(Object(Y.a)([{id:1,title:"\u72c0\u614b",textColor:["#ffffff","#ffffff"]},{id:2,title:"\u8fd4\u56de",textColor:["#ffffff","#ffffff"]}])),y=Object(r.a)(u,2),d=y[0],p=y[1],h=function(e){e.noop;return d.map((function(e,n){return Object(a.jsx)(x.Text,{interactive:!0,buttonMode:!0,text:e.get("title"),x:10,y:5+25*n,style:new H.q({fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:20,fill:e.get("textColor").toJS()}),pointerover:function(){p((function(e){return e.setIn([n,"textColor",1],"#9d4edd")}))},pointerout:function(){p((function(e){return e.setIn([n,"textColor",1],"#ffffff")}))},pointertap:function(n){switch(e.get("id")){case 1:o(I({key:t})),o(F({key:t}));break;case 2:c(!0),o(F({key:t}));break;default:return console.log(n.target)}}},n)}))};return Object(a.jsx)(x.Graphics,{x:800!==n?n:f,y:560!==i&&520!==i?i:l,zIndex:3,draw:function(e){e.lineStyle(1,"0xffffff",1),e.beginFill("0x22223b"),e.drawRoundedRect(0,0,60,62,8),e.endFill()},children:Object(a.jsx)(h,{})})},ce=function(e){var t=e.enemyChessProps,n=t.enemyChess,s=t.moveStep,c=void 0===s?Boolean:s,o=t.setMoveStep,r=t.dispatch;return n.map((function(e,t){return Object(a.jsxs)(i.a.Fragment,{children:[e.debut&&Object(a.jsx)(x.Sprite,{interactive:c,buttonMode:!0,width:40,height:40,x:40*e.x,y:40*e.y,zIndex:2,pointertap:function(){o(!1),r(F({key:t}))},image:J.resources["".concat(e.name,"-head-default")].data}),e.boardStatus&&Object(a.jsx)(ie,{ChessKey:t,positionX:40*e.x+40,positionY:40*e.y,setMoveStep:o,dispatch:r}),e.checkStatus&&Object(a.jsx)(ae,{ChessData:e,ChessKey:t,CheckStatus:I,setMoveStep:o,dispatch:r})]},t)}))},oe=function(){var e=Object(s.useState)("stageOne"),t=Object(r.a)(e,2),n=t[0],i=(t[1],Object(s.useState)({key:0,type:"MOVE"})),c=Object(r.a)(i,2),o=c[0],f=c[1],l=Object(s.useState)({title:"",status:!1}),y=Object(r.a)(l,2),d=y[0],p=y[1],h=Object(s.useState)({title:"",status:!1,position:{x:0,y:0}}),j=Object(r.a)(h,2),b=j[0],k=j[1],m=Object(s.useState)({status:!1,attacker:{key:""},target:{key:""}}),g=Object(r.a)(m,2),O=g[0],v=g[1],C=Object(s.useState)({status:!1,type:"",attacker:{key:"",skill:{},prevSP:0},target:{key:"",isHit:!1,prevLife:0}}),w=Object(r.a)(C,2),z=w[0],F=w[1],I=Object(s.useState)(!0),P=Object(r.a)(I,2),M=P[0],H=P[1],R=Object(u.c)((function(e){return e.chessMap})),q=Object(u.c)((function(e){return e.chess})),G=Object(u.c)((function(e){return e.enemyChess})),V=Object(u.b)();return Object(s.useEffect)((function(){V(S({isDebutChess:U.getIn([n,"debutChess"])})),V(T({isDebutChess:U.getIn([n,"debutEnemyChess"])}))}),[V,n]),Object(a.jsxs)(x.Stage,{width:800,height:600,options:{autoDensity:!0,antialias:!0,backgroundColor:75306},children:[Object(a.jsxs)(x.Container,{sortableChildren:!0,children:[Object(a.jsx)(x.Sprite,{width:800,height:600,zIndex:1,image:J.resources["".concat(n,"-main-BG")].data}),Object(a.jsx)(K,{reduxProps:{chess:q,enemyChess:G,chessMap:R,currentChess:o,dispatch:V,setTipStatus:k,setMoveStep:H,setBattleInfo:v}}),Object(a.jsx)(se,{chessProps:{chess:q,enemyChess:G,moveStep:M,setMoveStep:H,setCurrentChess:f,dispatch:V}}),Object(a.jsx)(ce,{enemyChessProps:{enemyChess:G,moveStep:M,setMoveStep:H,dispatch:V}})]}),b.status&&Object(a.jsx)(L,{props:{chess:q,currentChess:o,tipStatus:b,dispatch:V,setMoveStep:H,setTipStatus:k}}),d.status&&Object(a.jsx)(W,{props:{stageStatus:n,chess:q,currentChess:o,enemyChess:G,usualTip:d,setMoveStep:H,setUsualTip:p,setCurrentChess:f}}),O.status&&Object(a.jsx)(Z,{props:{battleInfo:O,setMoveStep:H,setBattleInfo:v,setAnimeShow:F,dispatch:V}}),z.status&&Object(a.jsx)(te,{props:{stageStatus:n,animeShow:z,chess:q,enemyChess:G,setMoveStep:H,setAnimeShow:F,setUsualTip:p,dispatch:V}})]})};function re(){var e=Object(f.a)(["\n  position: relative;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  width:100%;\n  height:100vh;\n  .loading {\n    color: #fff;\n    font-size:24px;\n  }\n"]);return re=function(){return e},e}function fe(){var e=Object(f.a)(["\n  body { background:#1d2430; }\n"]);return fe=function(){return e},e}var le=Object(l.a)(fe()),ue=l.b.div(re()),xe=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(s.useEffect)((function(){J.onComplete.add((function(){i(!0)}))})),Object(a.jsxs)(ue,{children:[Object(a.jsx)(le,{}),n?Object(a.jsx)(oe,{}):Object(a.jsx)("span",{className:"loading",children:"Loading.."})]})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))},de=n(6),pe=Object(de.c)({chess:j,chessMap:D,enemyChess:w}),he=Object(de.e)(pe);o.a.render(Object(a.jsx)(u.a,{store:he,children:Object(a.jsx)(xe,{})}),document.getElementById("root")),ye()}},[[74,1,2]]]);
//# sourceMappingURL=main.2661f35e.chunk.js.map